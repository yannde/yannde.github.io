(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);g&&g(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dicegame/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var g=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0175":function(e,t,a){"use strict";var n=a("3ac7"),s=a.n(n);s.a},"03be":function(e,t,a){},"0ad7":function(e,t,a){"use strict";var n=a("c828"),s=a.n(n);s.a},"1d06":function(e,t,a){"use strict";var n=a("d047"),s=a.n(n);s.a},2221:function(e,t,a){"use strict";var n=a("7b46"),s=a.n(n);s.a},"28a4":function(e,t,a){"use strict";var n=a("bd7b"),s=a.n(n);s.a},"3ac7":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"probabilities",(function(){return y})),a.d(n,"gainProbabilities",(function(){return b})),a.d(n,"boardSizes",(function(){return S})),a.d(n,"modes",(function(){return _})),a.d(n,"gamestates",(function(){return w})),a.d(n,"players",(function(){return k})),a.d(n,"timeouts",(function(){return C})),a.d(n,"tutorial",(function(){return O})),a.d(n,"languages",(function(){return P}));var s={};a.r(s),a.d(s,"languages",(function(){return x}));a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("d5e8"),a("5363");var i=a("2b0e"),r=a("ce5b"),o=a.n(r);a("bf40");i["default"].use(o.a);var c=new o.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#0d2b45",secondary:"#d08159",accent:"#544e68",error:"#6B120D",info:"#3B8A70",success:"#96C052",warning:"#D0AB59"}}}}),l=(a("907d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"cute",attrs:{id:"app"}},[a("GameHeader"),a("div",{staticClass:"main"},[a("router-view")],1),a("GameFooter")],1)])}),g=[],u=a("5530"),d=a("2f62"),m=a("53ca"),h=a("d4ec"),p=a("ade3"),f=function e(){Object(h["a"])(this,e),Object(p["a"])(this,"getLocalStorage",(function(e){var t=localStorage.getItem(e);try{return null!==t?JSON.parse(t):null}catch(a){return t}})),Object(p["a"])(this,"setLocalStorage",(function(e,t){localStorage.setItem(e,"object"===Object(m["a"])(t)?JSON.stringify(t):t)})),Object(p["a"])(this,"removeLocalStorage",(function(e){localStorage.removeItem(e)})),Object(p["a"])(this,"clearLocalStorage",(function(){localStorage.clear()}))},v=a("bee2"),y=[[.837963,.443673,.152006,.03588,.006105,766e-6,71e-6,5e-6],[.972994,.778549,.453575,.191701,.060713,.014879,.00289,452e-6],[.997299,.939236,.742831,.459528,.220442,.083423,.02545,.006379],[.99985,.98794,.909347,.718078,.463654,.242449,.103626,.036742],[.999996,.998217,.9753,.883953,.699616,.466731,.259984,.121507],[1,.999801,.994663,.961536,.862377,.685165,.469139,.274376],[1,.999983,.999069,.989534,.947731,.843874,.673456,.471091]],b=[[.675926,.331019,-.391976,-.8206,-.96337,-.994638,-.999432,-.999955],[.918982,1.114196,.267875,-.849794,-1.575009,-1.880968,-1.97399,-1.99548],[.989196,1.69618,1.456986,.216696,-1.236464,-2.249193,-2.7455,-2.929831],[.99925,1.92764,2.365429,1.744624,.172886,-1.57551,-2.860114,-3.559096],[.999976,1.987519,2.8024,2.955577,1.99616,.134041,-1.880192,-3.420409],[1,1.998408,2.951967,3.61536,3.486147,2.22198,.098807,-2.158736],[1,1.999847,2.99069,3.884874,4.372772,3.970362,2.428384,.066365]],S=[{name:"16",value:4},{name:"25",value:5},{name:"36",value:6}],_=[{name:"tutorial",value:0},{name:"normal",value:1},{name:"hard",value:2},{name:"timer",value:3},{name:"multiplayer",value:4}],w=[{name:"no game",value:0},{name:"game set",value:1},{name:"game started",value:2},{name:"game paused",value:3},{name:"game lost",value:4},{name:"game won",value:5}],k=[{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8}],C={executeAttack:300,moveToNextPlayer:600,changeSelected:150,attack:300,tutorial:500},O={adjacents:[[1,4],[0,2,5],[1,3,6],[2,7],[5,0,8],[4,6,1,9],[5,7,2,10],[6,3,11],[9,4,12],[8,10,5,13],[9,11,6,14],[10,7,15],[13,8],[12,14,9],[13,15,10],[14,11]],board:[{owner:0,added:0,dice:6,id:0,top:!0,left:!0,adjacents:[]},{owner:1,added:0,dice:3,id:1,top:!0,adjacents:[]},{owner:2,added:0,dice:2,id:2,top:!0,adjacents:[]},{owner:2,added:0,dice:2,id:3,top:!0,right:!0,adjacents:[]},{owner:1,added:0,dice:3,id:4,left:!0,adjacents:[]},{owner:3,added:0,dice:2,id:5,adjacents:[]},{owner:2,added:0,dice:4,id:6,adjacents:[]},{owner:0,added:0,dice:3,id:7,right:!0,adjacents:[]},{owner:3,added:0,dice:3,id:8,left:!0,adjacents:[]},{owner:1,added:0,dice:2,id:9,adjacents:[]},{owner:2,added:0,dice:2,id:10,adjacents:[]},{owner:3,added:0,dice:2,id:11,right:!0,adjacents:[]},{owner:0,added:0,dice:1,id:12,bottom:!0,left:!0,adjacents:[]},{owner:3,added:0,dice:4,id:13,bottom:!0,adjacents:[]},{owner:1,added:0,dice:2,id:14,bottom:!0,adjacents:[]},{owner:0,added:0,dice:2,id:15,right:!0,bottom:!0,adjacents:[]}],player:{id:0,cells:4,isHuman:!0,total:11,size:3,reserve:0,aggresive:1},players:[{id:0,color:0,cells:4,isHuman:!0,total:11,size:1,reserve:0,aggresive:1},{id:1,color:1,cells:4,total:10,size:1,reserve:0,aggresive:1},{id:2,color:2,cells:4,total:11,size:4,reserve:0,aggresive:1},{id:3,color:3,cells:4,total:10,size:1,reserve:0,aggresive:1}],settings:{players:4,size:4,mode:0,color:0},steps:[{values:[1,null],position:"center",delay:4e3},{values:[1,null],position:"center",delay:2e3,newMove:{from:15,to:11}},{values:[15,15],position:15,action:"select"},{values:[11,15],position:11,action:"attack",attackerDice:{cell:15,dice:[6,3],total:9},defenderDice:{cell:11,dice:[5],total:5},changeAttacker:3},{values:[11,null],position:"results",delay:3e3},{values:[11,null],position:"15b",delay:3e3},{values:[11,null],position:"11b",delay:3e3},{values:[11,null],position:"11c",delay:3e3,highlight:1},{values:[11,null],position:"player-0",delay:3e3,newMove:{from:7,to:6}},{values:[7,7],position:7,action:"select"},{values:[6,7],position:6,action:"attack",attackerDice:{cell:7,dice:[5,4,5],total:14},defenderDice:{cell:6,dice:[2,6,3,2],total:13},changeAttacker:4,changeDefender:2},{values:[6,6],position:"results",delay:3e3},{values:[6,6],position:"6b",delay:2e3,highlight:2},{values:[6,6],position:"6c",noFade:!0,delay:2e3,highlight:3},{values:[6,6],position:"player-2",delay:3e3},{values:[6,6],position:"player-0",delay:3e3,newMove:{from:6,to:5}},{values:[5,6],position:5,action:"attack",attackerDice:{cell:6,dice:[3,6,4],total:13},defenderDice:{cell:5,dice:[6,4,5],total:15}},{values:[5,null],position:"results",delay:3e3},{values:[5,null],position:"6d",delay:4e3},{values:[5,null],position:"5b",delay:4e3},{values:[5,null],position:"center",delay:4e3,end:!0},{done:!0}]},P=[{val:"en",text:"English"},{val:"vi",text:"Tiếng Việt"},{val:"ja",text:"日本語"}],x={en:{lang:"en",language:"English",aiPlaying:"AI playing",cancel:"cancel",copy:"link",copied:"Link copied to clipboard",easy:"TOO EASY!",exit:"exit",guest:"Joining",host:"Inviting",intros:["Pick your color","Choose the board size","Choose the number of players","Discover different game modes","Play!"],invite:"invite",lost:"You Lost",makeMove:"Make your move!",mode:"mode",mode_0:"tutorial",mode_1:"easy",mode_2:"hard",mode_3:"speed",mode_4:"multi player",more:"MOAR!",multiplayer:"multiplayer",name:"Name",nameText:"Enter your nickname",new:"new",next:"Next Turn",ok:"I'm OK",play:"play",player:"Player",players:"players",playing:"# playing",revenge:"Revenge!",setup:"setup",share:"Play Kingdom Dice with me!",size:"size",size_4:"small",size_5:"normal",size_6:"large",start:"start",tap:"Tap<br />to<br />start",tryMore:"Let me try more!",tutorials:['<b>Conquer</b> the <b>board</b><br />with your color<span class="tutorial_text_color"></span>',"<b>Let's start...</b>","<b>Tap</b> to <b>select</b><br/>this zone","...and <b>attack</b> here","Congratulations!<br /><b>You won</b> by 9 against 5","<b>One</b> dice  <b>stays</b>...","...and the <b>rest</b><br /><b>move</b> here","You now have<br /><b>3 connected zones</b>","...and will receive<br /><b>3 extra dice</b> next turn","Now <b>select</b> this zone","..and <b>attack</b><br />this one","Lucky you, <b>won again!</b>","You <b>split</b> the opponent's<br />zones in two","You <b>split</b> the opponent's<br />zones in two","..and they're <b>down</b><br />to <b>2 dice</b> next turn","<b>You're</b> now<br /><b>up</b> to 4 dice","Try one more <b>attack</b>","Bummer, <b>you lost</b>...","No worries, <b>one dice<br />remains</b> to defend...","...and there's more<br /><b>options</b> to <b>explore</b>","You're now ready to<br /><b>start playing, enjoy!</b>"],waiting:"waiting...",win:"WIN!"},vi:{lang:"vi",language:"Tiếng Việt",aiPlaying:"AI playing",cancel:"cancel",copy:"link",copied:"Link copied to clipboard",easy:"Quá dễ!",exit:"exit",guest:"Joining",host:"Inviting",intros:["Chọn màu","Chọn kích thước ","Chọn số người chơi","Discover different game modes","Chơi!"],invite:"invite",lost:"Thua rồi!",makeMove:"Di chuyển nào!",mode:"mode",mode_0:"tutorial",mode_1:"easy",mode_2:"hard",mode_3:"speed",mode_4:"multi player",more:"Chơi nữa!",multiplayer:"multiplayer",name:"Name",nameText:"Enter your nickname",new:"Mới",next:"Phiên tiếp theo",ok:"Cấp độ",play:"Chơi",player:"Player",players:"Người chơi",playing:"# playing",revenge:"Trả thù!",setup:"Cấu hình",share:"Play Kingdom Dice with me!",size:"Kích thước",size_4:"small",size_5:"normal",size_6:"large",start:"Bắt đầu",tap:"Nhấn<br />để<br />chơi",tryMore:"Let me try more!",tutorials:['<b>Conquer</b> the <b>board</b><br />with your color<span class="tutorial_text_color"></span>',"<b>Let's start...</b>","<b>Tap</b> to <b>select</b><br/>this zone","...and <b>attack</b> here","Congratulations!<br /><b>You won</b> by 9 against 5","<b>One</b> dice  <b>stays</b>...","...and the <b>rest</b><br /><b>move</b> here","You now have<br /><b>3 connected zones</b>","...and will receive<br /><b>3 extra dice</b> next turn","Now <b>select</b> this zone","..and <b>attack</b><br />this one","Lucky you, <b>won again!</b>","You <b>split</b> the opponent's<br />zones in two","You <b>split</b> the opponent's<br />zones in two","..and they're <b>down</b><br />to <b>2 dice</b> next turn","<b>You're</b> now<br /><b>up</b> to 4 dice","Try one more <b>attack</b>","Bummer, <b>you lost</b>...","No worries, <b>one dice<br />remains</b> to defend...","...and there's more<br /><b>options</b> to <b>explore</b>","You're now ready to<br /><b>start playing, enjoy!</b>"],waiting:"waiting...",win:"Thắng rồi!"},ja:{lang:"ja",language:"日本語",aiPlaying:"AI playing",cancel:"cancel",copy:"link",copied:"Link copied to clipboard",easy:"簡単過ぎ！<(￣︶￣)>",exit:"Joining",guest:"Inviting",host:"host",intros:["色を選んで","ボードのサイズを決めて","敵数を決めて","ゲームモードを試してみて","プレイ！"],invite:"invite",lost:"負けた！",makeMove:"始まる",mode:"モード",mode_0:"チュートリアル",mode_1:"簡単",mode_2:"ハード",mode_3:"スピード",mode_4:"multi player",more:"もっと！",multiplayer:"multiplayer",name:"Name",nameText:"Enter your nickname",new:"新しい",next:"次のプレヤー",ok:"そのままで大丈夫",play:"スタート",player:"Player",players:"プレヤー",playing:"# playing",revenge:"復讐！(＃`Д´)",setup:"設定",share:"Play Kingdom Dice with me!",size:"サイズ",size_4:"小",size_5:"中",size_6:"大",start:"スタート",tap:"タップ<br />で<br />スタート",tryMore:"Let me try more!",tutorials:['<b>Conquer</b> the <b>board</b><br />with your color<span class="tutorial_text_color"></span>',"<b>Let's start...</b>","<b>Tap</b> to <b>select</b><br/>this zone","...and <b>attack</b> here","Congratulations!<br /><b>You won</b> by 9 against 5","<b>One</b> dice  <b>stays</b>...","...and the <b>rest</b><br /><b>move</b> here","You now have<br /><b>3 connected zones</b>","...and will receive<br /><b>3 extra dice</b> next turn","Now <b>select</b> this zone","..and <b>attack</b><br />this one","Lucky you, <b>won again!</b>","You <b>split</b> the opponent's<br />zones in two","You <b>split</b> the opponent's<br />zones in two","..and they're <b>down</b><br />to <b>2 dice</b> next turn","<b>You're</b> now<br /><b>up</b> to 4 dice","Try one more <b>attack</b>","Bummer, <b>you lost</b>...","No worries, <b>one dice<br />remains</b> to defend...","...and there's more<br /><b>options</b> to <b>explore</b>","You're now ready to<br /><b>start playing, enjoy!</b>"],waiting:"waiting...",win:"勝った！"}},j=new f,F={board:[],busy:!0,chain:[],defender:null,player:{},players:[],results:{},selected:null,settings:{players:4,size:4,mode:0},playerId:0,playerName:"",gameId:null,color:0,status:0,pauseState:{},turns:0},M={getBoard:function(){return JSON.parse(JSON.stringify(F.board))},getCell:function(e){return JSON.parse(JSON.stringify(F.board[e]))},getSelected:function(){return JSON.parse(JSON.stringify(F.selected))},getDefender:function(){return JSON.parse(JSON.stringify(F.defender))},getPlayer:function(){return JSON.parse(JSON.stringify(F.player))},getPlayers:function(){return JSON.parse(JSON.stringify(F.players))},getSettings:function(){return JSON.parse(JSON.stringify(F.settings))},getPlayerId:function(){return JSON.parse(JSON.stringify(F.playerId))},getPlayerName:function(){return JSON.parse(JSON.stringify(F.playerName))},getGameId:function(){return JSON.parse(JSON.stringify(F.gameId))},getColor:function(){return JSON.parse(JSON.stringify(F.color))},getResults:function(){return JSON.parse(JSON.stringify(F.results))},getBusy:function(){return JSON.parse(JSON.stringify(F.busy))},getStatus:function(){return JSON.parse(JSON.stringify(F.status))},getChain:function(){return JSON.parse(JSON.stringify(F.chain))},getPauseState:function(e,t){return JSON.parse(JSON.stringify(e.pauseState))},getTurns:function(e,t){return JSON.parse(JSON.stringify(e.turns))}},N={setBoard:function(e,t){e.board=t},setCell:function(e,t){i["default"].set(e.board,t.i,t.data)},setSelected:function(e,t){e.selected=t},setDefender:function(e,t){e.defender=t},setPlayer:function(e,t){e.player=t},setPlayers:function(e,t){e.players=t},setSetting:function(e,t){e.settings=Object(u["a"])(Object(u["a"])({},e.settings),t),j.setLocalStorage("settings",e.settings)},setSettings:function(e,t){e.settings=t,j.setLocalStorage("settings",e.settings)},setPlayerId:function(e,t){e.playerId=t},setPlayerName:function(e,t){e.playerName=t,j.setLocalStorage("name",t)},setGameId:function(e,t){e.gameId=t},setColor:function(e,t){e.color=t,j.setLocalStorage("color",t)},setResults:function(e,t){e.results=t},setBusy:function(e,t){e.busy=t},setStatus:function(e,t){e.status=t},setChain:function(e,t){e.chain=t},setPauseState:function(e,t){e.pauseState=t},setTurns:function(e,t){e.turns=t}},I={changeBoard:function(e,t){var a=e.commit;a("setBoard",t)},changeCell:function(e,t){var a=e.commit;a("setCell",t)},changeSelected:function(e,t){var a=e.commit;a("setSelected",t)},changeDefender:function(e,t){var a=e.commit;a("setDefender",t)},changePlayer:function(e,t){var a=e.commit;a("setPlayer",t)},changePlayers:function(e,t){var a=e.commit;a("setPlayers",t)},changeSetting:function(e,t){var a=e.commit;a("setSetting",t)},changePlayerId:function(e,t){var a=e.commit;a("setPlayerId",t)},changePlayerName:function(e,t){var a=e.commit;a("setPlayerName",t)},changeGameId:function(e,t){var a=e.commit;a("setGameId",t)},changeColor:function(e,t){var a=e.commit;a("setColor",t)},changeSettings:function(e,t){var a=e.commit;a("setSettings",t)},changeResults:function(e,t){var a=e.commit;a("setResults",t)},changeBusy:function(e,t){var a=e.commit;a("setBusy",t)},changeStatus:function(e,t){var a=e.commit;a("setStatus",t)},changeChain:function(e,t){var a=e.commit;a("setChain",t)},changePauseState:function(e,t){var a=e.commit;a("setPauseState",t)},changeTurns:function(e,t){var a=e.commit;a("setTurns",t)}},T={namespaced:!0,state:F,getters:M,actions:I,mutations:N},z={isMobile:!1,showSettings:!0,activeSettings:!1,introStep:-1,tutorialStep:-1,preferences:{players:4,size:4,mode:0}},B={getIsMobile:function(){return JSON.parse(JSON.stringify(z.isMobile))},getShowSettings:function(){return JSON.parse(JSON.stringify(z.showSettings))},getActiveSettings:function(){return JSON.parse(JSON.stringify(z.activeSettings))},getTutorialStep:function(){return JSON.parse(JSON.stringify(z.tutorialStep))},getIntroStep:function(){return JSON.parse(JSON.stringify(z.introStep))}},G={setIsMobile:function(e,t){e.isMobile=t},setShowSettings:function(e,t){e.showSettings=t},setActiveSettings:function(e,t){e.activeSettings=t},setTutorialStep:function(e,t){e.tutorialStep=t},setIntroStep:function(e,t){e.introStep=t}},J={changeIsMobile:function(e,t){var a=e.commit;a("setIsMobile",t)},changeShowSettings:function(e,t){var a=e.commit;a("setShowSettings",t)},changeActiveSettings:function(e,t){var a=e.commit;a("setActiveSettings",t)},changeTutorialStep:function(e,t){var a=e.commit;a("setTutorialStep",t)},changeIntroStep:function(e,t){var a=e.commit;a("setIntroStep",t)}},L={namespaced:!0,state:z,getters:B,actions:J,mutations:G};i["default"].use(d["a"]);var A=new d["a"].Store({state:{i18n:null},mutations:{setLang:function(e,t){e.i18n=t}},actions:{changeLang:function(e,t){var a=e.commit;a("setLang",t)}},modules:{game:T,settings:L}}),$=new f,D=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"getName",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name",i="";if(n[e]){var r=n[e].filter((function(e){return e[a]===t}))[0];r&&(i=null===s?r:r[s])}return i}},{key:"changeLang",value:function(e){A.dispatch("changeLang",x[e]),$.setLocalStorage("lang",e)}}]),e}(),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameFooter"},[a("GameIntro"),a("GameResults"),a("div",{staticClass:"gameFooter_menu",class:["gameFooter_menu-"+e.settings.color]},[a("GameFooterSettings")],1)],1)},R=[],H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameFooterSettings"},[a("GameFooterColors",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"color"===e.select},on:{select:e.update}}),a("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"size"===e.select},attrs:{value:e.settings.settings.size,type:"size"},on:{"update:value":function(t){return e.$set(e.settings.settings,"size",t)},select:e.update}}),a("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"players"===e.select},attrs:{value:e.settings.settings.players,type:"players"},on:{"update:value":function(t){return e.$set(e.settings.settings,"players",t)},select:e.update}}),a("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"mode"===e.select},attrs:{value:e.settings.settings.mode,type:"mode"},on:{"update:value":function(t){return e.$set(e.settings.settings,"mode",t)},select:e.update}}),a("div",{staticClass:"gameFooterSettings_content_container"},[a("div",{staticClass:"gameFooterSettings_content"},[a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-color",class:{"gameFooterSettings_color-inactive":!e.settingsState.showSettings},attrs:{text:""},on:{click:function(t){return e.toSelect("color")}}},[a("div",{staticClass:"gameFooterSettings_color",class:[{"gameFooterSettings_color-intro":0===e.settingsState.introStep},"gameFooterSettings_color-"+e.game.color]})]),a("div",{staticClass:"gameFooterSettings_content_right"},[a("div",{staticClass:"gameFooterSettings_content_right_grid",class:{"gameFooterSettings_content_right_grid-settings":e.settingsState.showSettings}},[a("GameFooterControls"),a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-size",class:{"gameFooterSettings_link-active":"size"===e.select},attrs:{text:""},on:{click:function(t){return e.toSelect("size")}}},[a("div",{staticClass:"gameFooterSettings_link_icon icon icon-board",class:[{"gameFooterSettings_link_icon-intro":1===e.settingsState.introStep},"icon-board-"+e.settings.settings.size]}),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(e.i18n["size_"+e.settings.settings.size]))])]),a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-players",class:{"gameFooterSettings_link-active":"players"===e.select},attrs:{text:""},on:{click:function(t){return e.toSelect("players")}}},[a("div",{staticClass:"gameFooterSettings_link_icon gameFooterSettings_link_icon-players icon icon-players",class:{"gameFooterSettings_link_icon-intro":2===e.settingsState.introStep}},[a("span",{staticClass:"gameFooterSettings_link_icon_text"},[e._v(e._s(e.settings.settings.players))])]),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(e.i18n.players))])]),a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-mode",class:{"gameFooterSettings_link-active":"mode"===e.select},attrs:{text:""},on:{click:function(t){return e.toSelect("mode")}}},[a("div",{staticClass:"gameFooterSettings_link_icon icon icon-mode",class:[{"gameFooterSettings_link_icon-intro":3===e.settingsState.introStep},"icon-mode-"+e.settings.settings.mode]}),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(e.i18n["mode_"+e.settings.settings.mode]))])]),a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-play gameFooterSettings_link-active",attrs:{text:""},on:{click:function(t){return e.newGame(null,!0)}}},[a("div",{staticClass:"gameFooterSettings_link_icon icon icon-dices",class:{"gameFooterSettings_link_icon-intro":4===e.settingsState.introStep}}),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(1===+e.game.status||2===+e.game.status?e.i18n.new:e.i18n.play))])]),4===e.game.settings.mode?a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-settings",attrs:{text:""},on:{click:e.leaveMultiplayer}},[a("div",{staticClass:"gameFooterSettings_link_icon icon icon-exit"}),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(e.i18n.exit))])]):a("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-settings",attrs:{text:""},on:{click:e.toSettings}},[a("div",{staticClass:"gameFooterSettings_link_icon icon icon-settings"}),a("div",{staticClass:"gameFooterSettings_link_text"},[e._v(e._s(e.i18n.setup))])])],1)])],1)]),a("v-overlay",{staticClass:"gameFooterSettings_overlay",attrs:{value:!!e.select||e.game.status>0&&e.settingsState.showSettings||e.game.status>3,"z-index":9},nativeOn:{click:function(t){return e.closeOverlay(null)}}},[a("div",{staticClass:"gameFooterSettings_overlay_content",class:{"gameFooterSettings_overlay_content-active":!e.select}},[4===e.game.status?[a("span",{domProps:{innerHTML:e._s(e.i18n.lost)}}),4!==e.game.settings.mode||e.game.players.length<2?a("v-btn",{staticClass:"gameFooterSettings_message_btn",attrs:{color:"primary",large:""},on:{click:function(t){return e.newGame()}}},[a("span",{staticClass:"icon icon-swords"}),e._v(" "+e._s(e.i18n.revenge)+" ")]):e._e()]:5===e.game.status?[a("span",{domProps:{innerHTML:e._s(e.i18n.win)}}),e.settingsState.tutorialStep>0?a("v-btn",{staticClass:"gameFooterSettings_message_btn",attrs:{color:"primary",large:""},on:{click:function(t){return e.newGame(1)}}},[a("span",{staticClass:"icon icon-tutorial"}),e._v(" "+e._s(e.i18n.tryMore)+" ")]):[a("v-btn",{staticClass:"gameFooterSettings_message_btn",attrs:{color:"primary",large:""},on:{click:function(t){return e.newGame(1===e.game.settings.mode?2:null)}}},[a("span",{staticClass:"icon icon-crown"}),e._v(" "+e._s(1===e.game.settings.mode?e.i18n.easy:e.i18n.more)+" ")]),1===e.game.settings.mode?a("v-btn",{staticClass:"gameFooterSettings_message_btn gameFooterSettings_message_btn-last",attrs:{color:"primary",outlined:"",large:""},on:{click:function(t){return e.newGame(1)}}},[a("span",{staticClass:"icon icon-bottle"}),e._v(" "+e._s(e.i18n.ok)+" ")]):e._e()]]:a("span",{staticClass:"gameFooterSettings_overlay_icon icon icon-pause"})],2)])],1)},Y=[],q=(a("4160"),a("a630"),a("c975"),a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("8c4f")),U=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rules"},[a("h1",[e._v("Rules")]),a("ul",[a("li",[e._v("The player who holds all the squares in the grid wins")]),a("li",[e._v("You can attack any adjecent square held by another color if you have at least 2 dices")]),a("li",[e._v("After each turn dices will be randomly added to your squares "),a("ul",[a("li",[e._v("The amount is determined by the largest group of adjecent squares you have")]),a("li",[e._v("The maximum amount is 8 dices in a square")]),a("li",[e._v("If more dices can't be added the remaining will be held in reserve to use later")])])])])])}],K=a("2877"),W={},Q=Object(K["a"])(W,U,V,!1,null,null,null),Z=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"touch",rawName:"v-touch:swipe.left",value:e.swipedLeft,expression:"swipedLeft",arg:"swipe",modifiers:{left:!0}}],staticClass:"game",on:{click:e.deselect}},[a("div",{staticClass:"game_start",domProps:{innerHTML:e._s(e.i18n.tap)}}),a("GamePlayers"),a("div",{staticClass:"game_board_container",class:{"game_board_container-isPlayer":e.game.player.id===e.game.playerId}},[0===e.game.settings.mode&&e.game.status>0?a("Tutorial"):e._e(),a("div",{staticClass:"game_board",class:[{"game_board-busy":e.game.busy},"game_board-size-"+e.game.settings.size,"game_board-player-"+e.game.settings.size,"game_board-status-"+e.game.status],on:{click:e.boardClick}},e._l(e.game.board,(function(e,t){return a("GameCell",{key:t,attrs:{cell:e,i:t}})})),1),a("div",{staticClass:"game_highlight_wrapper"},[a("div",{staticClass:"game_highlight_container",class:["game_highlight_container-size-"+e.game.settings.size]},[a("div",{staticClass:"game_highlight"})])])],1)],1)},ee=[],te=(a("caad"),a("2532"),a("c740"),a("59ca")),ae=a.n(te),ne=(a("66ce"),{apiKey:"AIzaSyDmFxhiG4EnAH9leA4BUfRdZFT3fqy43-U",authDomain:"kingdomdicegame.firebaseapp.com",databaseURL:"https://kingdomdicegame.firebaseio.com",projectId:"kingdomdicegame",storageBucket:"kingdomdicegame.appspot.com",messagingSenderId:"827409612186",appId:"1:827409612186:web:2eda232c4f85f7d0face23",measurementId:"G-HCZQ4TJW3N"}),se=ae.a.initializeApp(ne),ie=se,re=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"chain",value:function(e){var t=A.getters["game/getSelected"],a=A.getters["game/getBoard"],n=A.getters["game/getChain"];n.push({selected:t,i:e}),console.log("chain",n),n.forEach((function(e,t){a[e.i].chain=t+1})),A.dispatch("game/changeChain",n),A.dispatch("game/changeBoard",a)}},{key:"processBoard",value:function(){var e=A.getters["game/getBoard"],t=Math.sqrt(e.length);e=e.map((function(a,n){return a.id=n,a.added=0,n<t&&(a.top=!0),(n+1)%t||(a.right=!0),n>=e.length-t&&(a.bottom=!0),n%t||(a.left=!0),a})),e=e.map((function(a,n){var s=[];return n%t&&s.push(n-1),(n+1)%t&&s.push(n+1),n>=t&&s.push(n-t),n<e.length-t&&s.push(n+t),a.adjacents=s,a})),A.dispatch("game/changeBoard",e)}},{key:"attack",value:function(e){var t=this;return new Promise((function(a){var n=A.getters["game/getSelected"],s=A.getters["game/getBoard"],i=A.getters["game/getPlayerId"],r=A.getters["game/getSettings"],o=s[n],c=o.owner===i,l=s[e],g=l.owner===i,u=t.dice(o.dice,c),d=t.dice(l.dice,g),m=l.owner;u.cell=n,d.cell=e,A.dispatch("game/changeResults",{attacker:o.owner,defender:m,attackerDice:u,defenderDice:d});var h="top";if(e===n+1?h="right":e===n-1?h="left":e>n&&(h="bottom"),s[e].direction=h,s[e].defender=!0,A.dispatch("game/changeBoard",s),c&&A.dispatch("game/changeBusy",!0),4===r.mode){var p=A.getters["game/getResults"];p.attackerCell=n,p.defenderCell=e,p.action="attack",t.emitMove(p)}setTimeout((function(){l.defender=!1,u.total>d.total?(l.dice=o.dice-1,l.owner=o.owner,t.checkLost(m)||(l.dice>1&&c?A.dispatch("game/changeSelected",e):A.dispatch("game/changeSelected",null),t.calculateAdd(m))):A.dispatch("game/changeSelected",null),t.calculateAdd(o.owner),o.dice=1,A.dispatch("game/changeCell",{i:e,data:l}),A.dispatch("game/changeCell",{i:n,data:o}),c&&A.dispatch("game/changeBusy",!1),a({status:200})}),C.executeAttack)}))}},{key:"dice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=A.getters["game/getSettings"],n=0,s=[],i=6;1===a.mode&&(i=t?6.1:5.9);for(var r=0;r<e;r++){var o=Math.min(Math.max(Math.floor(Math.random()*i)+1,1),6);s.push(o),n+=o}return{total:n,dice:s}}},{key:"checkLost",value:function(e){var t=A.getters["game/getBoard"],a=A.getters["game/getPlayers"],n=A.getters["game/getPlayerId"],s=A.getters["game/getSettings"];if(!t.filter((function(t){return t.owner===e})).length){var i=a.findIndex((function(t){return t.id===e}));if(a[i].id===n){if(A.dispatch("game/changeStatus",4),A.dispatch("game/changeSelected",null),4===s.mode){var r={action:"lost"};this.emitMove(r)}this.remainingHumanPlayers()}if(a.splice(i,1),A.dispatch("game/changePlayers",a),1===a.length){if(A.dispatch("game/changeSelected",null),a[0].id===n){if(A.dispatch("game/changeStatus",5),4===s.mode){var o={action:"win"};this.emitMove(o)}A.dispatch("settings/changeShowSettings",!0)}return!0}}return!1}},{key:"calculateAdd",value:function(e){for(var t=this,a=A.getters["game/getPlayers"],n=A.getters["game/getBoard"],s=this.getPlayerCells(e),i=1,r=0;r<s.length;r++)s[r]>-1&&function(){var e=[];e.push(s[r]),delete s[r];for(var t=0;t<e.length;t++)n[e[t]].adjacents.forEach((function(t){if(s.includes(t)){e.push(t);var a=s.indexOf(t);delete s[a]}}));i=Math.max(e.length,i)}();return a=a.map((function(a){var s=t.getPlayerCells(a.id);if(a.total=s.reduce((function(e,t){return e+n[t].dice}),0),a.cells=s.length,a.id===e){a.size=i;var r=A.getters["game/getPlayer"];a.id===r.id&&A.dispatch("game/changePlayer",a)}return a})),A.dispatch("game/changePlayers",a),i}},{key:"getPlayerCells",value:function(e){var t=[];return A.getters["game/getBoard"].forEach((function(a,n){a.owner===e&&t.push(n)})),t}},{key:"emitMove",value:function(e){var t=A.getters["game/getGameId"],a=A.getters["game/getPlayerId"],n=ie.database().ref(t).child("moves").push().key;e.from=a,ie.database().ref(t+"/moves/"+n).set(Object(u["a"])({},e))}},{key:"applyAdd",value:function(e){var t=A.getters["game/getPlayerId"],a=A.getters["game/getPlayers"],n=e.player===t,s=A.getters["game/getBoard"].map((function(t,a){return e.cells&&e.cells[a]?(n&&(t.added=e.cells[a]-t.dice),t.dice=e.cells[a]):t.added=null,t}));a[a.findIndex((function(t){return t.id===e.player}))].reserve=Math.min(e.reserve,8*Math.sqrt(s.length)),A.dispatch("game/changePlayers",a),A.dispatch("game/changeBoard",s)}},{key:"remainingHumanPlayers",value:function(){var e=A.getters["game/getPlayers"],t=A.getters["game/getPlayerId"];0===e.filter((function(e){return e.isHuman&&e.id!==t})).length&&A.dispatch("settings/changeShowSettings",!0)}},{key:"moveToNextPlayer",value:function(){var e=A.getters["game/getPlayer"],t=A.getters["game/getPlayers"],a=t.findIndex((function(t){return t.id===e.id})),n=(a+1)%t.length,s=t[n],i=A.getters["game/getPlayerId"];A.dispatch("game/changeResults",{}),A.dispatch("game/changePlayer",s),s.id===i&&A.dispatch("game/changeBusy",!1)}}]),e}(),oe=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"tutorialSetup",value:function(){var e=this,t=A.getters["game/getColor"],a=JSON.parse(JSON.stringify(O.players));t>0&&(a[0].color=t,t<4&&(a[t].color=0)),A.dispatch("game/changeSetting",{size:4}),A.dispatch("game/changeSelected",null),A.dispatch("game/changeBoard",O.board),A.dispatch("game/changePlayers",a),A.dispatch("game/changePlayer",a[0]),A.dispatch("game/changeBusy",!1),A.dispatch("game/changeStatus",1),A.dispatch("settings/changeTutorialStep",0);var n=O.steps[0];setTimeout((function(){0===A.getters["settings/getTutorialStep"]&&e.tutorialStep(1)}),n.delay)}},{key:"tutorialStep",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=A.getters["settings/getTutorialStep"],s=O.steps[n],i=A.getters["game/getSelected"],r=A.getters["game/getBoard"],o=A.getters["game/getPlayers"];if(s.newMove&&(r[s.newMove.from].adjacents=[s.newMove.to],A.dispatch("game/changeBoard",r)),s.action){if(JSON.stringify(s.values)===JSON.stringify([e,i]))if("attack"===s.action){var c=+JSON.stringify(r[e].owner),l={attacker:0,defender:r[e].owner,attackerDice:s.attackerDice,defenderDice:s.defenderDice},g=r[i],u=r[e];A.dispatch("game/changeResults",l),A.dispatch("game/changeBusy",!0);var d="top";e===i+1?d="right":e===i-1?d="left":e>i&&(d="bottom"),r[e].direction=d,r[e].defender=!0,A.dispatch("game/changeBoard",r),setTimeout((function(){u.defender=!1,l.attackerDice.total>l.defenderDice.total?(u.dice=g.dice-1,u.owner=0,A.dispatch("game/changeCell",{i:e,data:u}),u.dice>1?A.dispatch("game/changeSelected",e):A.dispatch("game/changeSelected",null)):A.dispatch("game/changeSelected",null),g.dice=1,A.dispatch("game/changeCell",{i:e,data:u}),A.dispatch("game/changeCell",{i:i,data:g}),s.changeAttacker&&(o[0].size=s.changeAttacker),s.changeDefender&&(o[c].size=s.changeDefender),A.dispatch("game/changePlayers",o),t.nextStep(e)}),2*C.executeAttack)}else this.nextStep(e)}else this.nextStep(e,a)}},{key:"nextStep",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=A.getters["settings/getTutorialStep"]+1;setTimeout((function(){A.dispatch("settings/changeTutorialStep",n);var a=O.steps[n];a.delay?setTimeout((function(){A.getters["settings/getTutorialStep"]>n||(a.end?t.endTutorial():t.tutorialStep(e))}),a.delay):A.dispatch("game/changeBusy",!1)}),a?50:C.tutorial)}},{key:"nextTutorial",value:function(){var e=A.getters["settings/getTutorialStep"],t=O.steps[e],a=O.steps[e+1];a.end?this.endTutorial():t.delay&&this.tutorialStep(0,!0)}},{key:"endTutorial",value:function(){var e=A.getters["settings/getTutorialStep"];O.steps[e].done||(A.dispatch("settings/changeTutorialStep",e+1),A.dispatch("game/changeBusy",!1),setTimeout((function(){var e=A.getters["game/getBoard"];e=e.map((function(e,t){return e.adjacents=O.adjacents[t],e})),A.dispatch("game/changeBoard",e),A.dispatch("game/changeSetting",{mode:1})}),C.tutorial))}}]),e}(),ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gamePlayers_container",class:{"gamePlayers_container-active":e.game.status>0}},[a("div",{ref:"players",staticClass:"gamePlayers"},e._l(e.game.players,(function(t){return a("div",{key:t.id,ref:"player"+t.id,refInFor:!0,staticClass:"gamePlayers_player"},[a("div",{staticClass:"gamePlayers_player_color",class:[{"gamePlayers_player_color-active":t.id===e.playingId},{"gamePlayers_player_color-isPlayer":t.id===e.game.playerId},"gamePlayers_player_color-"+t.color]},[e._v(e._s(t.size))]),t.reserve?a("div",{staticClass:"gamePlayers_player_reserve"},[a("span",{staticClass:"gamePlayers_player_reserve_icon icon icon-treasure"}),e._v(" "+e._s(t.reserve)+" ")]):e._e()])})),0)])},le=[],ge={name:"GamePlayers",computed:Object(d["c"])({game:function(e){return e.game},playingId:function(e){return e.game.player.id}}),data:function(){return{newGameDialog:!1}},methods:{},watch:{playingId:function(e){var t=this.$refs.players.offsetWidth-60,a=this.game.players.findIndex((function(t){return t.id===e})),n=Math.floor(t/120),s=a>n?60*(a-n)-30:-30;this.$refs.players.scrollTo({top:0,left:s,behavior:"smooth"})}}},ue=ge,de=(a("bba8"),Object(K["a"])(ue,ce,le,!1,null,null,null)),me=de.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"game_cell",class:[{"game_cell-selectable":e.selectable(e.i),"game_cell-selected":e.i===e.game.selected,"game_cell-add":e.cell.added,"game_cell-isPlayer":e.cell.owner===e.game.player.id},"game_cell-owner-"+e.cell.owner,"game_cell-color-"+e.getColor(e.cell.owner),e.connectors(e.cell)],attrs:{depressed:e.i!==e.game.selected},on:{click:function(t){return e.select(e.i,e.cell.owner)}}},[a("div",{staticClass:"game_cell_dices"},[a("div",{staticClass:"game_cell_dices_left"},e._l(Math.min(e.cell.dice,4),(function(e,t){return a("div",{key:t,staticClass:"game_cell_dice"})})),0),e.cell.dice>4?a("div",{staticClass:"game_cell_dices_right"},e._l(e.cell.dice-4,(function(e,t){return a("div",{key:t,staticClass:"game_cell_dice"})})),0):e._e()]),e.cell.top||e.cell.left?e._e():a("div",{staticClass:"game_cell_corner game_cell_corner-top-left"}),e.cell.top||e.cell.right?e._e():a("div",{staticClass:"game_cell_corner game_cell_corner-top-right"}),e.cell.bottom||e.cell.right?e._e():a("div",{staticClass:"game_cell_corner game_cell_corner-bottom-right"}),e.cell.bottom||e.cell.left?e._e():a("div",{staticClass:"game_cell_corner game_cell_corner-bottom-left"}),a("div",{staticClass:"game_cell_defender",class:[{"game_cell_defender-active":e.cell.defender},"game_cell_defender-"+e.cell.direction]}),a("div",{staticClass:"game_cell_add"},[e._v(e._s(e.cell.added?"+"+e.cell.added:""))])])},pe=[],fe={name:"GameCell",props:{cell:{default:null},i:{default:null}},computed:Object(d["c"])({game:function(e){return e.game},i18n:function(e){return e.i18n}}),data:function(){return{gameService:new Ve,attackService:new re,tutorialService:new oe}},methods:Object(u["a"])(Object(u["a"])({select:function(e,t){e===this.game.selected?this.deselect():t===this.game.player.id?this.gameService.changeSelected(e):0!==this.game.settings.mode&&this.attackService.attack(e),0===this.game.settings.mode&&this.tutorialService.tutorialStep(e)},selectable:function(e){var t=this,a=this.game.board[e];if(a.owner===this.game.player.id){if(a.dice>1){var n=a.adjacents.filter((function(e){return t.game.board[e].owner!==a.owner}));return n.length>0}}else if(null!==this.game.selected){if(e===this.game.selected)return!0;if(this.game.board[this.game.selected].adjacents.includes(e))return!0}return!1},deselect:function(){this.game.board.length<1?(this.gameService.newGame(),this.changeShowSettings(!1)):this.game.busy||this.changeSelected(null)},getColor:function(e){return this.game.players.filter((function(t){return t.id===e}))[0].color},connectors:function(e){var t=[],a=[!1,!1,!1,!1],n=e.id,s=e.owner;if(!e.top){var i=n-this.game.settings.size;this.game.board[i].owner===s&&(t.push("game_cell-connectTop"),a[0]=!0)}if(!e.right){var r=n+1;this.game.board[r].owner===s&&(t.push("game_cell-connectRight"),a[1]=!0)}if(!e.bottom){var o=n+this.game.settings.size;this.game.board[o].owner===s&&(t.push("game_cell-connectBottom"),a[2]=!0)}if(!e.left){var c=n-1;this.game.board[c].owner===s&&(t.push("game_cell-connectLeft"),a[3]=!0)}return a[0]&&(a[3]&&t.push("game_cell-cornerTopLeft"),a[1]&&t.push("game_cell-cornerTopRight")),a[2]&&(a[1]&&t.push("game_cell-cornerBottomRight"),a[3]&&t.push("game_cell-cornerBottomLeft")),e.top||a[0]||(e.right||a[1]||t.push("game_cell-connectTopRight"),e.left||a[3]||t.push("game_cell-connectTopLeft")),e.bottom||a[2]||(e.right||a[1]||t.push("game_cell-connectBottomRight"),e.left||a[3]||t.push("game_cell-connectBottomLeft")),t}},Object(d["b"])("game",["changeSelected"])),Object(d["b"])("settings",["changeShowSettings"]))},ve=fe,ye=(a("ebc9"),Object(K["a"])(ve,he,pe,!1,null,null,null)),be=ye.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tutorial_container",class:{"tutorial_container-click":e.tutorial.steps[e.settings.tutorialStep].delay},on:{click:e.nextTutorial}},[a("div",{staticClass:"tutorial"},[e._l(e.tutorial.steps,(function(t,n){return[t.done?e._e():a("div",{key:n,staticClass:"tutorial_text",class:[{"tutorial_text-active":n===e.settings.tutorialStep},{"tutorial_text-attack":"attack"===t.action},{"tutorial_text-noFade":t.noFade},"tutorial_text-position-"+t.position,"tutorial_text-color-"+e.gameSettings.color],domProps:{innerHTML:e._s(e.i18n.tutorials[n])}})]})),a("div",{staticClass:"tutorial_highlight_container",class:["tutorial_highlight_container-"+this.tutorial.steps[this.settings.tutorialStep].highlight]},[a("div",{staticClass:"tutorial_highlight",class:{"tutorial_highlight-active":this.tutorial.steps[this.settings.tutorialStep].highlight}})])],2)])},_e=[],we={name:"Tutorial",computed:Object(d["c"])({gameSettings:function(e){return e.game.settings},settings:function(e){return e.settings},i18n:function(e){return e.i18n}}),data:function(){return{tutorialService:new oe,tutorial:O}},methods:{nextTutorial:function(){this.tutorialService.nextTutorial()}}},ke=we,Ce=(a("b25e"),Object(K["a"])(ke,Se,_e,!1,null,null,null)),Oe=Ce.exports,Pe={name:"Game",components:{GamePlayers:me,GameCell:be,Tutorial:Oe},computed:Object(d["c"])({game:function(e){return e.game},settings:function(e){return e.game},i18n:function(e){return e.i18n}}),data:function(){return{gameService:new Ve,attackService:new re,tutorialService:new oe}},methods:Object(u["a"])(Object(u["a"])({select:function(e,t){e===this.game.selected?this.deselect():t===this.game.player.id?this.gameService.changeSelected(e):0!==this.game.settings.mode&&this.attackService.attack(e),0===this.game.settings.mode&&this.tutorialService.tutorialStep(e)},selectable:function(e){var t=this,a=this.game.board[e];if(a.owner===this.game.player.id){if(a.dice>1){var n=a.adjacents.filter((function(e){return t.game.board[e].owner!==a.owner}));return n.length>0}}else if(null!==this.game.selected){if(e===this.game.selected)return!0;if(this.game.board[this.game.selected].adjacents.includes(e))return!0}return!1},boardClick:function(e){e.stopPropagation(),this.game.status<2&&this.gameService.startGame()},deselect:function(){this.game.board.length<1?(this.gameService.newGame(),this.changeShowSettings(!1)):this.game.busy||this.changeSelected(null)},getColor:function(e){return this.game.players.filter((function(t){return t.id===e}))[0].color},swipedLeft:function(){}},Object(d["b"])("game",["changeSelected"])),Object(d["b"])("settings",["changeShowSettings"]))},xe=Pe,je=(a("2221"),Object(K["a"])(xe,X,ee,!1,null,null,null)),Fe=je.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"multiplayer"},[a("v-card",[a("v-card-title",[e._v(e._s(e.isHost?e.i18n.host:e.i18n.guest)+" "+e._s(e.i18n.multiplayer))]),a("v-card-text",[e.isHost?a("div",{staticClass:"multiplayer_links"},[a("div",{staticClass:"multiplayer_link"},[e.webShareApiSupported?a("v-btn",{attrs:{depressed:"",color:"primary",large:""},on:{click:e.share}},[a("span",{staticClass:"icon icon-share"}),e._v(" "+e._s(e.i18n.invite)+" ")]):[a("v-btn",{attrs:{depressed:"",color:"primary",large:""},on:{click:e.copy}},[a("span",{staticClass:"icon icon-copy"}),e._v(" "+e._s(e.i18n.copy)+" ")]),a("input",{ref:"copy",staticClass:"multiplayer_copy",attrs:{type:"text"},domProps:{value:"https://yannde.github.io/dicegame/?id="+e.gameId}})]],2),a("qrcode-vue",{staticClass:"multiplayer_qr",attrs:{value:"https://yannde.github.io/dicegame/?id="+e.gameId}})],1):e._e(),a("div",{staticClass:"multiplayer_self"},[a("v-text-field",{staticClass:"multiplayer_name",attrs:{value:e.game.playerName,label:e.i18n.name,placeholder:e.i18n.nameText,outlined:""},on:{input:function(t){return e.updatePlayerName(t)}}})],1),a("div",{staticClass:"multiplayer_players"},[a("div",{staticClass:"multiplayer_loader",class:{"multiplayer_loader-loaded":e.players&&e.players.length>1}},e._l(8,(function(e){return a("div",{key:e,staticClass:"multiplayer_player multiplayer_player-loading"})})),0),e._l(e.players,(function(t){return a("div",{key:t.id,staticClass:"multiplayer_player",class:[{icon:!t.name},{"icon-player":t.isHuman&&!t.name},{"icon-ai":!t.isHuman},{"multiplayer_player-shortName":e.nameFilter(t.name)},{"multiplayer_player-isPlayer":t.id===e.game.playerId},"multiplayer_player-color-"+t.color]},[e._v(e._s(e._f("name")(t.name)))])}))],2),e._v(" status: "+e._s(e.status)+" ")]),a("v-card-actions",[a("v-spacer"),e.isHost?a("v-btn",{attrs:{depressed:"",color:"primary",large:"",disabled:e.disabled()},on:{click:e.startMultiplayer}},[e._v(e._s(e.disabled()?e.i18n.waiting:e.i18n.start))]):e._e()],1)],1),a("v-snackbar",{attrs:{timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.snackbarText))])],1)},Ne=[],Ie=(a("b64b"),new re),Te=null,ze=[],Be=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"initMultiplayer",value:function(){A.dispatch("game/changeStatus",1),A.dispatch("settings/changeShowSettings",!1),A.dispatch("game/changeResults",{})}},{key:"setupMultiplayer",value:function(){var e=A.getters["game/getGameId"],t=A.getters["game/getPlayers"];t=this.cleanUp(t);var a={0:{action:"ready"}},n=e||ie.database().ref().push().key;ie.database().ref(n).set({players:t,moves:a}),A.dispatch("game/changeGameId",n)}},{key:"joinMultiplayer",value:function(e){var t=A.getters["game/getColor"],a=A.getters["game/getGameId"],n=A.getters["game/getPlayerName"];A.dispatch("game/changeResults",{});var s=!0,i=!1,r=!1,o=0;return e=e.map((function(e){return e.aggresive>=0?(i=!0,e):(!i&&s?e.isHuman?e.color===t&&(r=!0):(e.isHuman=!0,e.name=n,A.dispatch("game/changePlayerId",e.id),r?A.dispatch("game/changeColor",e.color):(o=JSON.parse(JSON.stringify(e.color)),e.color=t),s=!1):e.color===t&&(e.color=o),e)})),i?"started":s?"full":(e=this.cleanUp(e),A.dispatch("game/changePlayers",e),ie.database().ref(a).set({players:e}),this.watchMoves(),"ready")}},{key:"changeMultiplayerName",value:function(e){var t=A.getters["game/getGameId"],a=A.getters["game/getPlayerId"],n=A.getters["game/getPlayerName"];e[e.findIndex((function(e){return e.id===a}))].name=n,ie.database().ref(t).set({players:e})}},{key:"startMultiplayer",value:function(){var e=A.getters["game/getPlayers"],t=A.getters["game/getGameId"];A.dispatch("game/changeStatus",2),ie.database().ref(t+"/players").set(Object(u["a"])({},e)),ze=[],this.watchMoves(),Re.push({name:"Game"})}},{key:"joinStartMultiplayer",value:function(){var e=A.getters["game/getPlayers"],t=A.getters["game/getPlayerId"],a=A.getters["game/getBoard"],n={players:e.length,size:Math.sqrt(a.length),mode:4};A.dispatch("game/changeSettings",n),A.dispatch("game/changePlayer",e[0]),A.dispatch("game/changeSelected",null),A.dispatch("game/changeResults",{}),A.dispatch("game/changeStatus",2),e[0].id===t?A.dispatch("game/changeBusy",!1):A.dispatch("game/changeBusy",!0),this.watchMoves(),Re.push({name:"Game"})}},{key:"watchMoves",value:function(){var e=A.getters["game/getGameId"];Te=ie.database().ref(e+"/moves");var t=this;Te&&Te.off("child_added"),Te.on("child_added",(function(a){a.val().action&&"new"===a.val().action&&A.dispatch("game/changeStatus",6),a.val().action&&"ready"===a.val().action&&(ze=[],Re.push({name:"Multiplayer",params:{id:e}})),t.listAction(a.val())}))}},{key:"listAction",value:function(e){if(e&&ze.push(Object(u["a"])(Object(u["a"])({},e),{},{status:"pending"})),!ze.filter((function(e){return"executing"===e.status})).length){var t=ze.findIndex((function(e){return"pending"===e.status}));t>-1&&(ze[t].status="executing",this.executeMove(ze[t]))}}},{key:"executeMove",value:function(e){var t=this;e.status="done";var a=A.getters["game/getPlayerId"];e.from!==a?"board"===e.action?(A.dispatch("game/changeBoard",e.board),Ie.processBoard(),this.listAction()):"next"===e.action?(e.status="executing",Ie.applyAdd(e),setTimeout((function(){e.status="done",Ie.moveToNextPlayer(),t.listAction()}),C.moveToNextPlayer)):"attack"===e.action&&(e.status="executing",this.executeAttack(e)):this.listAction()}},{key:"executeAttack",value:function(e){var t=this,a=A.getters["game/getBoard"],n=e.attackerCell,s=e.defenderCell,i=e.attackerDice,r=e.defenderDice,o=e.defender,c=a[n],l=a[s];A.dispatch("game/changeResults",e),A.dispatch("game/changeSelected",n);var g="top";s===n+1?g="right":s===n-1?g="left":s>n&&(g="bottom"),a[s].direction=g,a[s].defender=!0,A.dispatch("game/changeBoard",a),setTimeout((function(){l.defender=!1,i.total>r.total?(l.dice=c.dice-1,l.owner=c.owner,Ie.checkLost(o)||(A.dispatch("game/changeSelected",null),Ie.calculateAdd(o))):A.dispatch("game/changeSelected",null),Ie.calculateAdd(c.owner),c.dice=1,A.dispatch("game/changeCell",{i:s,data:l}),A.dispatch("game/changeCell",{i:n,data:c}),e.status="done",t.listAction()}),C.executeAttack)}},{key:"endMultiplayer",value:function(){A.dispatch("game/changeBoard",[]),A.dispatch("game/changePlayers",[]),A.dispatch("game/changePlayer",{}),A.dispatch("game/changeSelected",null),A.dispatch("game/changeResults",{}),A.dispatch("game/changeStatus",0),A.dispatch("game/changeGameId",null),Re.push({name:"Game"}),Te&&Te.off("child_added")}},{key:"again",value:function(){var e=A.getters["game/getGameId"],t=ie.database().ref(e).child("moves").push().key,a={action:"new"};Te&&Te.off("child_added"),ie.database().ref(e+"/moves/"+t).set(Object(u["a"])({},a)).then((function(e){Re.push({name:"Multiplayer"})}))}},{key:"cleanUp",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),Ge=a("d7b0"),Je={name:"Multiplayer",components:{QrcodeVue:Ge["a"]},computed:Object(d["c"])({game:function(e){return e.game},gameId:function(e){return e.game.gameId},i18n:function(e){return e.i18n},webShareApiSupported:function(){return navigator.share}}),data:function(){return{gameService:new Ve,multiplayerService:new Be,playersRef:null,gameRef:null,isHost:null,players:[],snackbar:!1,snackbarText:null,status:"init"}},created:function(){this.isHost=!this.$route.params.id},mounted:function(){this.multiplayerService.initMultiplayer();var e=!!this.gameId;this.changePlayerId(0),this.isHost?(this.gameService.setPlayers(),this.multiplayerService.setupMultiplayer(),e&&this.initConnections()):e?this.initConnections():this.changeGameId(this.$route.params.id)},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({copy:function(){this.$refs.copy.select(),this.$refs.copy.setSelectionRange(0,99999),document.execCommand("copy"),this.snackbarText=this.i18n.copied,this.snackbar=!0},disabled:function(){return!this.players||!this.players[1]||!this.players[1].isHuman},nameFilter:function(e){return!!(e&&i["default"].filter("name")(e).length<3)},initConnections:function(){this.gameRef=ie.database().ref(this.gameId),this.playersRef=ie.database().ref(this.gameId+"/players");var e=this;this.playersRef.on("value",(function(t){e.players=t.val(),e.isHost||0!==e.game.playerId||(e.status=e.multiplayerService.joinMultiplayer(e.players),"ready"!==e.status&&(e.status=status,e.playersRef.off(),e.gameRef.off()))}),(function(e){console.log("Error: "+e.code)})),this.isHost||this.gameRef.on("value",(function(t){if(t.val()&&t.val().moves&&t.val().players[0].aggresive>=0&&"ready"===e.status){var a=t.val().moves[Object.keys(t.val().moves)[0]].board;e.changeBoard(a),e.changePlayers(t.val().players),e.multiplayerService.joinStartMultiplayer(),e.gameService.finalizePlayers(),e.playersRef.off(),e.gameRef.off()}}),(function(e){console.log("Error: "+e.code)}))},share:function(){var e={title:"KingdomDice",text:this.i18n.share,url:"https://yannde.github.io/dicegame/?id="+this.gameId};navigator.share(e)},updatePlayerName:function(e){var t=this;this.changePlayerName(e),setTimeout((function(){e===t.game.playerName&&t.multiplayerService.changeMultiplayerName(t.players)}),500)},startMultiplayer:function(){this.playersRef.off(),this.changePlayers(this.players),this.gameService.setupPlayers(),this.multiplayerService.startMultiplayer(),this.gameService.setUpGame()}},Object(d["b"])("game",["changePlayers"])),Object(d["b"])("game",["changeBoard"])),Object(d["b"])("game",["changeGameId"])),Object(d["b"])("game",["changePlayerId"])),Object(d["b"])("game",["changePlayerName"])),watch:{gameId:function(e){this.initConnections()}}},Le=Je,Ae=(a("a7ab"),Object(K["a"])(Le,Me,Ne,!1,null,"9e3f1066",null)),$e=Ae.exports;i["default"].use(q["a"]);var De=[{path:"/",name:"Game",component:Fe},{path:"/rules",name:"Rules",component:Z},{path:"/multiplayer/:id?",name:"Multiplayer",component:$e}],Ee=new q["a"]({mode:"history",base:"/dicegame/",routes:De}),Re=Ee,He=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"aiMove",value:function(e){var t=A.getters["game/getPlayer"],a=A.getters["game/getBoard"],n=A.getters["game/getSettings"],s=a.filter((function(e){return e.owner===t.id&&e.dice>1})),i=-8*t.cells+t.total+t.size+t.reserve,r=.52-.12*t.aggresive;n.mode>1&&(r+=Math.min(e,5)*(.2-.08*t.aggresive)),(i>=-1||t.size>Math.pow(n.size,1.4))&&(r=Math.min(r,.44));var o=[];return 0!==s.length&&(s.forEach((function(e){e.adjacents.forEach((function(n){var s=a[n];if(s.owner!==t.id){var i=y[e.dice-2][s.dice-1],c=b[e.dice-2][s.dice-1];if(i>r){var l={attacker:e.id,defender:n,owner:s.owner,probability:i,gainProbability:c,weighedBenefit:1};o.push(l)}}}))})),n.mode>1&&(o=this.attackBiggest(o),o=this.simulateMoves(o)),0!==o.length&&(o.sort((function(e,t){return e.gainProbability<t.gainProbability?1:-1})),o.sort((function(e,t){return e.weighedBenefit<t.weighedBenefit?1:-1})),1===n.mode&&o.sort((function(){return Math.random()-.5})),o[0]))}},{key:"attackBiggest",value:function(e){var t=A.getters["game/getPlayer"],a=A.getters["game/getPlayers"],n=A.getters["game/getSettings"],s=Math.pow(n.size,2)/2+Math.round(-2*t.aggresive+1),i=a.filter((function(e){return e.id!==t.id&&e.cells>=s}));return i.length?e.filter((function(e){return e.owner===i[0].id})):e.map((function(e){var t=a.filter((function(t){return t.id===e.owner}))[0].cells;return e.weighedBenefit=.8+Math.pow(n.cells,2)/2/t*.4,e}))}},{key:"simulateMoves",value:function(e){var t=this,a=A.getters["game/getPlayer"],n=A.getters["game/getBoard"];return e.forEach((function(e){var s=JSON.parse(JSON.stringify(n));s[e.defender].dice=s[e.attacker].dice-1,s[e.defender].owner=a.id,s[e.attacker].dice=1,e.gain=t.calculateMoveResult(s,a.id),e.lose=-1*t.calculateMoveResult(s,e.owner),e.benefit=e.gain*(-2*a.aggresive+2.5)+e.lose,e.weighedBenefit*=e.benefit*(e.probability+2)})),e}},{key:"calculateMoveResult",value:function(e,t){var a=A.getters["game/getPlayers"],n=[];e.forEach((function(e,a){e.owner===t&&n.push(a)}));for(var s=1,i=0;i<n.length;i++)n[i]>-1&&function(){var t=[];t.push(n[i]),delete n[i];for(var a=0;a<t.length;a++)e[t[a]].adjacents.forEach((function(e){if(n.includes(e)){t.push(e);var a=n.indexOf(e);delete n[a]}}));s=Math.max(t.length,s)}();var r=a[a.findIndex((function(e){return e.id===t}))];return r?s-r.size:-1}}]),e}(),Ye=new He,qe=new re,Ue=new oe,Ve=function(){function e(){Object(h["a"])(this,e)}return Object(v["a"])(e,[{key:"newGame",value:function(){var e=A.getters["game/getSettings"];0!==e.mode?4!==e.mode?(this.setPlayers(),this.setupPlayers(),this.setUpGame()):Re.push({name:"Multiplayer"}):Ue.tutorialSetup()}},{key:"setupPlayers",value:function(){var e=A.getters["game/getSettings"];this.changeBoard();var t=A.getters["game/getPlayers"].map((function(t){return t.aggresive=e.mode>1?Math.round(100*Math.random())/100:1,t}));e.mode>1&&(t=t.sort((function(){return Math.random()-.5}))),A.dispatch("game/changePlayers",t)}},{key:"finalizePlayers",value:function(){var e=A.getters["game/getBoard"],t=A.getters["game/getPlayers"].map((function(t){t.size=qe.calculateAdd(t.id),t.reserve=0;var a=e.filter((function(e){return e.owner===t.id}));return t.total=a.reduce((function(e,t){return e+t.dice}),0),t.cells=a.length,t}));A.dispatch("game/changePlayer",t[0]),A.dispatch("game/changePlayers",t),A.dispatch("game/changeTurns",0)}},{key:"setUpGame",value:function(){var e=A.getters["game/getSettings"],t=A.getters["game/getPlayerId"];this.finalizePlayers();var a=A.getters["game/getPlayer"];A.dispatch("game/changeSelected",null),A.dispatch("game/changeResults",{}),4!==e.mode&&A.dispatch("game/changeStatus",1),A.dispatch("game/changePauseState",{}),a.id===t?(A.dispatch("game/changeBusy",!1),3===e.mode&&A.dispatch("game/changeStatus",2)):(A.dispatch("game/changeBusy",!0),3===e.mode?this.startGame():4!==e.mode||a.isHuman||this.startGame())}},{key:"setPlayers",value:function(){var e=A.getters["game/getSettings"],t=A.getters["game/getColor"],a=A.getters["game/getPlayerName"],n=[],s=Array.from(Array(e.players).keys());s.forEach((function(e){var s={id:e};0===e?(s.isHuman=!0,s.color=t,s.name=a):s.color=s.id!==t?s.id:0,n.push(s)})),A.dispatch("game/changePlayers",n)}},{key:"changeBoard",value:function(){var e=A.getters["game/getSettings"],t=A.getters["game/getPlayers"],a=[],n=Math.pow(e.size,2),s=Math.floor(n/e.players),i=n%e.players;if(t.map((function(t,n){for(var r=[],o=0,c=n-i<0?s+1:s,l=0;l<c;l++){var g=3*Math.random();o+=g,r.push(g)}var u=2*c/o*(s/c);1===e.mode&&0===n&&(u*=1.2),r=r.map((function(e){return 1+Math.floor(e*u)}));for(var d=0;d<c;d++)a.push({owner:n,dice:r[d]})})),a=a.sort((function(){return Math.random()-.5})),4===e.mode){var r={action:"board",board:a};qe.emitMove(r)}A.dispatch("game/changeBoard",a),qe.processBoard(),A.dispatch("game/changePlayers",t)}},{key:"startGame",value:function(){A.dispatch("game/changeStatus",2),this.aiMoves(0)}},{key:"changeSelected",value:function(e){A.dispatch("game/changeStatus",2),A.dispatch("game/changeSelected",e)}},{key:"changePlayer",value:function(e){A.dispatch("game/changePlayer",e)}},{key:"addAttack",value:function(e){this.changeSelected(e),qe.chain(e)}},{key:"nextPlayer",value:function(){var e=this,t=A.getters["game/getTurns"]+1;A.dispatch("game/changeTurns",t),A.dispatch("game/changeBusy",!0),A.dispatch("game/changeSelected",null),this.calculateAdd(),setTimeout((function(){qe.moveToNextPlayer();var t=A.getters["game/getPlayer"];t.isHuman||e.aiMoves(0)}),C.moveToNextPlayer)}},{key:"aiMoves",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=A.getters["game/getTurns"]/2;if(A.dispatch("game/changePauseState",{i:e,prevDefender:a}),!A.getters["settings/getShowSettings"]){var s=Ye.aiMove(e);if(!1!==s&&e<=n){var i=A.getters["game/getSelected"],r=s.attacker!==i&&s.attacker!==a?C.changeSelected:10;setTimeout((function(){A.getters["settings/getShowSettings"]||(s.attacker!==i&&t.changeSelected(s.attacker),setTimeout((function(){if(!A.getters["settings/getShowSettings"]){var a=t;qe.attack(s.defender).then((function(t){4===A.getters["game/getStatus"]&&4!==A.getters["game/getSettings"].mode||a.aiMoves(++e,s.defender)}))}}),C.attack))}),r)}else A.dispatch("game/changePauseState",{}),this.nextPlayer()}}},{key:"calculateAdd",value:function(){var e=JSON.parse(JSON.stringify(A.getters["game/getBoard"])),t=A.getters["game/getPlayer"],a=A.getters["game/getSettings"],n=qe.getPlayerCells(t.id),s=+t.size+(t.reserve||0),i={cells:[]};for(s;s>0&&n.length;s--){var r=n[Math.floor(Math.random()*n.length)];e[r].dice>7?(n.splice(n.indexOf(r),1),s++):(e[r].dice++,i.cells[r]=e[r].dice)}i.player=t.id,i.reserve=s||0,4===a.mode&&(i.action="next",qe.emitMove(i)),qe.applyAdd(i)}}]),e}(),Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"gameFooterSelect",staticClass:"gameFooterSelect gameFooterSelect-color",on:{"&scroll":function(t){return e.onScroll(t)},touchend:e.onScrollEnd}},[a("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-start gameFooterSelect_padding-start-color"}),e._l(8,(function(t,n){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,staticClass:"gameFooterSelect_select",on:{click:function(t){return e.select(n)}}},[a("div",{staticClass:"gameFooterSelect_select_content",style:{transform:e.getTransform(n)}},[a("div",{staticClass:"gameFooterSelect_color",class:["gameFooterSelect_color-"+n]})])])})),a("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-end gameFooterSelect_padding-end-color"})],2)])},We=[],Qe={name:"GameFooterColors",computed:Object(d["c"])({color:function(e){return e.game.color}}),data:function(){return{selected:0,zoom:1.5,next:1,zoomNext:1}},mounted:function(){this.selected=this.color,this.$refs.gameFooterSelect.scrollTo({top:0,left:80*this.color})},methods:Object(u["a"])({select:function(e){this.$refs.gameFooterSelect.scrollTo({top:0,left:80*e,behavior:"smooth"}),this.changeColor(e),this.$emit("select",!0)},onScroll:function(e){var t=e.srcElement.scrollLeft/80,a=Math.round(t);this.selected!==a&&(this.selected=a,this.changeColor(this.selected));var n=t-this.selected;this.next=n>0?this.selected+1:this.selected-1,n=Math.abs(n),this.zoom=1.5-n/2,this.zoomNext=1+n/2},onScrollEnd:function(){var e=this;if(this.pos-this.$refs.gameFooterSelect.scrollLeft)return this.pos=this.$refs.gameFooterSelect.scrollLeft,void setTimeout((function(){e.onScrollEnd()}),100);this.pos=this.$refs.gameFooterSelect.scrollLeft;var t=80*this.selected;this.$refs.gameFooterSelect.scrollTo({top:0,left:t,behavior:"smooth"})},getTransform:function(e){switch(e){case this.selected:return"scale("+this.zoom+")";case this.next:return"scale("+this.zoomNext+")"}return"scale(1)"}},Object(d["b"])("game",["changeColor"])),watch:{color:function(e){this.selected!==e&&(this.selected=e,this.$refs.gameFooterSelect.scrollTo({top:0,left:80*e}))}}},Ze=Qe,Xe=(a("8caa"),Object(K["a"])(Ze,Ke,We,!1,null,null,null)),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameFooterControls"},[e.game.status<2&&e.game.settings.mode<3?[e.game.player.id===e.game.playerId?a("v-btn",{attrs:{color:"primary",disabled:e.game.busy||0===e.game.settings.mode,large:""},on:{click:e.next}},[e._v(e._s(e.i18n.next))]):a("div",{staticClass:"gameFooterControls_message"},[a("v-btn",{staticClass:"gameFooterControls_message_btn",attrs:{color:"primary",large:""},on:{click:e.start}},[e._v(e._s(e.i18n.start))])],1)]:2===e.game.status?[3===e.game.settings.mode&&e.game.player.id===e.game.playerId?[a("GameFooterTimer")]:e.game.player.id===e.game.playerId?a("v-btn",{attrs:{color:"primary",disabled:e.game.busy||0===e.game.settings.mode,large:""},on:{click:e.next}},[e._v(e._s(e.i18n.next))]):4===e.game.settings.mode?a("div",{staticClass:"gameFooterControls_message"},[e.game.player.isHuman?[e._v(e._s(e.i18n.playing.replace("#",e.game.player.name?e.game.player.name:e.i18n.player+" "+e.game.player.id+1))+"...")]:[e._v(e._s(e.i18n.aiPlaying)+"...")]],2):e._e()]:e._e()],2)},at=[],nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"gameFooterTimer",on:{click:e.next}},[a("span",{staticClass:"gameFooterTimer_countdown"},[e._v("00:"+e._s(e.timer>9?"":"0")+e._s(e.timer))])])},st=[],it={name:"GameFooterTimer",computed:Object(d["c"])({game:function(e){return e.game}}),data:function(){return{gameService:new Ve,timer:11,countDown:null,delay:250}},mounted:function(){this.timer=2*this.game.settings.size+1,this.count()},methods:Object(u["a"])({count:function(){var e=this;this.timer--,this.countDown=setTimeout((function(){e.count()}),1e3)},next:function(){this.timer=0}},Object(d["b"])("game",["changeBusy"])),watch:{timer:function(e){var t=this;this.timer<1&&(clearTimeout(this.countDown),this.game.busy&&(this.delay=1e3),this.changeBusy(!0),setTimeout((function(){t.gameService.nextPlayer()}),this.delay))}}},rt=it,ot=(a("599a"),Object(K["a"])(rt,nt,st,!1,null,null,null)),ct=ot.exports,lt={name:"GameFooterControls",components:{GameFooterTimer:ct},computed:Object(d["c"])({game:function(e){return e.game},settingsState:function(e){return e.settings},i18n:function(e){return e.i18n}}),data:function(){return{gameService:new Ve,multiplayerService:new Be,settings:{settings:{}},select:null,showSettings:!0}},methods:{start:function(){this.gameService.startGame()},next:function(){this.gameService.nextPlayer()}}},gt=lt,ut=(a("28a4"),Object(K["a"])(gt,tt,at,!1,null,null,null)),dt=ut.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"gameFooterSelect",staticClass:"gameFooterSelect",class:["gameFooterSelect-"+e.type],on:{"&scroll":function(t){return e.onScroll(t)},touchend:e.onScrollEnd}},[a("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-start",class:["gameFooterSelect_padding-start-"+e.type]}),e._l(e.val,(function(t,n){return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.value,ref:"select-"+n,refInFor:!0,staticClass:"gameFooterSelect_select",on:{click:function(a){return e.select(t.value,n)}}},[a("div",{staticClass:"gameFooterSelect_select_content",style:{transform:e.getTransform(n)}},["size"===e.type?a("span",{staticClass:"gameFooterSelect_select_icon icon",class:["icon-board-"+t.value]}):"mode"===e.type?a("span",{staticClass:"gameFooterSelect_select_icon icon",class:["icon-mode-"+t.value]}):[e._v(e._s(t.name))]],2)])})),a("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-end",class:["gameFooterSelect_padding-end-"+e.type]})],2)])},ht=[],pt={name:"GameFooterValue",props:{type:{default:"size"},value:{default:1}},computed:Object(d["c"])({settings:function(e){return e.game.settings},val:function(){var e=S;switch(this.type){case"players":e=k;break;case"mode":e=_;break}return e}}),data:function(){return{boardSizes:S,modes:_,players:k,selected:0,zoom:1.5,next:1,zoomNext:1,pos:0}},mounted:function(){this.setValue()},methods:{setValue:function(){var e=this;this.selected=this.value;var t=this.val.findIndex((function(t){return t.value===e.value}));this.$refs.gameFooterSelect.scrollTo({top:0,left:80*t})},select:function(e,t){var a=80*t;this.$refs.gameFooterSelect.scrollTo({top:0,left:a,behavior:"smooth"}),this.$emit("update:value",e),this.$emit("select",!0)},onScroll:function(e){var t=e.srcElement.scrollLeft/80,a=Math.round(t);this.selected!==a&&(this.selected=a,this.$emit("update:value",this.val[a].value));var n=t-this.selected;this.next=n>0?this.selected+1:this.selected-1,n=Math.abs(n),this.zoom=1.5-n/2,this.zoomNext=1+n/2},onScrollEnd:function(){var e=this;if(this.pos!==this.$refs.gameFooterSelect.scrollLeft)return this.pos=this.$refs.gameFooterSelect.scrollLeft,void setTimeout((function(){e.onScrollEnd()}),50);this.pos=this.$refs.gameFooterSelect.scrollLeft;var t=80*this.selected;this.$refs.gameFooterSelect.scrollTo({top:0,left:t,behavior:"smooth"})},getTransform:function(e){switch(e){case this.selected:return"scale("+this.zoom+")";case this.next:return"scale("+this.zoomNext+")"}return"scale(1)"}},watch:{value:function(e){var t=this,a=this.val.findIndex((function(e){return e.value===t.value}));this.selected!==a&&this.setValue()}}},ft=pt,vt=Object(K["a"])(ft,mt,ht,!1,null,null,null),yt=vt.exports,bt={name:"GameFooterSettings",components:{GameFooterColors:et,GameFooterControls:dt,GameFooterValue:yt},computed:Object(d["c"])({game:function(e){return e.game},settingsState:function(e){return e.settings},gameResults:function(e){return e.game.results},i18n:function(e){return e.i18n},mode:function(){return this.settings.settings.mode}}),data:function(){return{gameService:new Ve,multiplayerService:new Be,settings:{settings:{}},select:null,showSettings:!0}},mounted:function(){this.$set(this.settings,"settings",JSON.parse(JSON.stringify(this.game.settings)))},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({toSelect:function(e){this.select=this.select===e?null:e,this.changeActiveSettings(!!this.select)},update:function(){setTimeout((function(e){e.select=null,e.changeActiveSettings(null)}),300,this)},newGame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||4!==this.game.settings.mode?(e&&(this.settingsState.tutorialStep>0&&this.changeTutorialStep(-1),this.$set(this.settings.settings,"mode",e)),this.changeSettings(JSON.parse(JSON.stringify(this.settings.settings))),this.select=null,this.changeActiveSettings(null),this.changeShowSettings(!1),this.gameService.newGame()):this.multiplayerService.again()},toSettings:function(){this.changeShowSettings(!0)},leaveMultiplayer:function(){this.changeShowSettings(!0),this.multiplayerService.endMultiplayer()},closeOverlay:function(){this.select=!1,this.changeActiveSettings(!1),this.game.status>0&&(this.changeShowSettings(!1),this.game.pauseState.i>-1&&this.gameService.startGame(this.game.pauseState))}},Object(d["b"])("game",["changeSettings"])),Object(d["b"])("settings",["changeShowSettings"])),Object(d["b"])("settings",["changeActiveSettings"])),Object(d["b"])("settings",["changeTutorialStep"])),watch:{mode:{handler:function(e,t){0===t&&(this.$set(this.settings.settings,"size",4),this.$set(this.settings.settings,"players",4))}},settings:{handler:function(e){0!==e.settings.mode||4===e.settings.size&&4===e.settings.players||this.$set(this.settings.settings,"mode",1)},deep:!0}}},St=bt,_t=(a("0175"),Object(K["a"])(St,H,Y,!1,null,null,null)),wt=_t.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"results_container"},[e.game.results&&e.game.results.attackerDice&&e.game.results.attacker===e.game.player.id?a("div",{staticClass:"results"},[a("div",{staticClass:"results_side results_side-attacker",class:{"results_side-win":e.game.results.attackerDice.total>e.game.results.defenderDice.total}},[a("div",{staticClass:"results_result results_result-attacker"},[a("div",{staticClass:"results_dices",class:["results_dices-"+e.game.results.attackerDice.dice.length]},e._l(e.game.results.attackerDice.dice,(function(e,t){return a("div",{key:t,staticClass:"results_dice icon",class:["icon-dice-"+e]})})),0)]),a("div",{staticClass:"results_color",class:[{"results_color-player":e.game.results.attacker===e.game.settings.color},"results_color-"+e.game.results.attacker]},[e._v(e._s(e.game.results.attackerDice.total))])]),a("div",{staticClass:"results_vs icon icon-swords"}),a("div",{staticClass:"results_side results_side-defender",class:{"results_side-win":e.game.results.attackerDice.total<=e.game.results.defenderDice.total}},[a("div",{staticClass:"results_color",class:[{"results_color-player":e.game.results.defender===e.game.settings.color},"results_color-"+e.game.results.defender]},[e._v(e._s(e.game.results.defenderDice.total))]),a("div",{staticClass:"results_result results_result-defender"},[a("div",{staticClass:"results_dices",class:["results_dices-"+e.game.results.defenderDice.dice.length]},e._l(e.game.results.defenderDice.dice,(function(e,t){return a("div",{key:t,staticClass:"results_dice icon",class:["icon-dice-"+e]})})),0)])])]):e.game.player.id===e.game.playerId?a("div",{staticClass:"results_message"},[e._v(e._s(e.i18n.makeMove))]):e._e()])},Ct=[],Ot={name:"GameResults",computed:Object(d["c"])({game:function(e){return e.game},settings:function(e){return e.settings},gameResults:function(e){return e.game.results},i18n:function(e){return e.i18n}}),data:function(){return{gameService:new Ve,resultsActive:!1}},methods:{},watch:{gameResults:function(e){this.resultsActive=!0;var t=this.game.player.id===this.settings.isPlaying?750:1500;setTimeout((function(t){t.gameResults===e&&(t.showResults=!1)}),t,this)}}},Pt=Ot,xt=(a("1d06"),Object(K["a"])(Pt,kt,Ct,!1,null,"3e8a1822",null)),jt=xt.exports,Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameIntro_container",class:{"gameIntro_container-active":0===e.status&&!e.activeSettings}},[a("div",{staticClass:"gameIntro"},[a("div",{staticClass:"gameIntro_slides_container"},[a("div",{staticClass:"gameIntro_slides",class:[{"gameIntro_slides-end":e.end},"gameIntro_slides-"+e.step]},e._l(5,(function(t,n){return a("div",{key:t,staticClass:"gameIntro_slide",class:["gameIntro_slide-"+n]},[a("div",{staticClass:"gameIntro_text"},[e._v(e._s(e.i18n.intros[n]))])])})),0)]),a("div",{staticClass:"gameIntro_indicator_container"},[a("div",{staticClass:"gameIntro_indicator",class:["gameIntro_indicator-"+e.step]},[a("span",{staticClass:"gameIntro_indicator_icon gameIntro_indicator_icon icon icon-chevron",class:{"gameIntro_indicator_icon-animate":e.start}})])])])])},Mt=[],Nt={name:"GameIntro",computed:Object(d["c"])({status:function(e){return e.game.status},step:function(e){return e.settings.introStep},activeSettings:function(e){return e.settings.activeSettings},i18n:function(e){return e.i18n}}),data:function(){return{stepper:null,start:!1,end:!1}},mounted:function(){this.start=!0,this.toStep()},destroyed:function(){clearTimeout(this.stepper)},methods:Object(u["a"])({toStep:function(){var e=this;this.end=!1,this.changeIntroStep((this.step+1)%5),4===this.step&&(this.stepper=setTimeout((function(){e.end=!0}),1e3)),this.stepper=setTimeout((function(){e.toStep()}),4e3)}},Object(d["b"])("settings",["changeIntroStep"])),watch:{status:function(e){e>0&&(clearTimeout(this.stepper),this.changeIntroStep(-1))}}},It=Nt,Tt=(a("6761"),Object(K["a"])(It,Ft,Mt,!1,null,"eb08c2de",null)),zt=Tt.exports,Bt={name:"GameFooter",components:{GameResults:jt,GameFooterSettings:wt,GameIntro:zt},computed:Object(d["c"])({settings:function(e){return e.game.settings}})},Gt=Bt,Jt=(a("0ad7"),Object(K["a"])(Gt,E,R,!1,null,null,null)),Lt=Jt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gameHeader"},[a("div",{staticClass:"gameHeader_content"},[a("span",{staticClass:"gameHeader_icon icon icon-dices"}),a("span",{staticClass:"gameHeader_title"},[e._v("Kingdom Dice")]),a("span",{staticClass:"gameHeader_language icon icon-language pc-hide"},[a("select",{staticClass:"gameHeader_language_select",on:{input:function(t){return e.changeLang(t.srcElement.value)}}},e._l(e.i18n.languages,(function(t){return a("option",{key:t.lang,domProps:{selected:t.lang===e.lang,value:t.lang}},[e._v(" "+e._s(t.language)+" ")])})),0)]),a("v-select",{staticClass:"gameHeader_language_v-select sp-hide",attrs:{items:e.languages,"item-text":"text","item-value":"val",value:e.lang,outlined:""},on:{input:function(t){return e.changeLang(t)}}})],1)])},$t=[],Dt={name:"GameHeader",computed:Object(d["c"])({lang:function(e){return e.i18n.lang}}),data:function(){return{commonService:new D,i18n:s,languages:P}},methods:{changeLang:function(e){this.commonService.changeLang(e)}}},Et=Dt,Rt=(a("e466"),Object(K["a"])(Et,At,$t,!1,null,null,null)),Ht=Rt.exports,Yt={name:"App",components:{GameFooter:Lt,GameHeader:Ht},computed:Object(d["c"])({defaultSettings:function(e){return e.game.settings},isMobile:function(e){return e.settings.isMobile}}),data:function(){return{webStorageService:new f,commonService:new D}},created:function(){this.$nextTick((function(){window.addEventListener("resize",this.setMobile),this.setMobile()}));var e=this.webStorageService.getLocalStorage("settings");e&&(0===e.mode&&(e.mode=1),e=Object(u["a"])(Object(u["a"])({},this.defaultSettings),e),this.changeSettings(e));var t=this.webStorageService.getLocalStorage("color");t&&this.changeColor(t);var a=this.webStorageService.getLocalStorage("name");a&&this.changePlayerName(a);var n=this.webStorageService.getLocalStorage("lang")||"en";this.commonService.changeLang(n),this.$route.query.id&&this.$router.push({name:"Multiplayer",params:{id:this.$route.query.id}})},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({setMobile:function(e){var t=document.documentElement.clientWidth<768;t!==this.isMobile&&this.changeIsMobile(t)}},Object(d["b"])("settings",["changeIsMobile"])),Object(d["b"])("game",["changeSettings"])),Object(d["b"])("game",["changeColor"])),Object(d["b"])("game",["changePlayerName"]))},qt=Yt,Ut=(a("5c0b"),Object(K["a"])(qt,l,g,!1,null,null,null)),Vt=Ut.exports,Kt=a("9483");Object(Kt["a"])("".concat("/dicegame/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("ac1f"),a("1276");function Wt(e){if(!e)return e;var t=e.split(" ");return e=t.length>1?t[0].substr(0,1)+t[1].substr(0,1).toUpperCase()+(t[2]?t[2].substr(0,1).toUpperCase():""):t[0].substr(0,3),e}var Qt=a("0086"),Zt=a.n(Qt),Xt=a("fe3c"),ea=a.n(Xt),ta=a("7707"),aa=a.n(ta);i["default"].use(Zt.a),window.addEventListener("load",(function(){ea.a.attach(document.body)}),!1),aa.a.polyfill(),i["default"].config.productionTip=!1,i["default"].filter("name",Wt),new i["default"]({router:Re,store:A,vuetify:c,render:function(e){return e(Vt)}}).$mount("#app")},"599a":function(e,t,a){"use strict";var n=a("abc2"),s=a.n(n);s.a},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},"5e79":function(e,t,a){},6761:function(e,t,a){"use strict";var n=a("5e79"),s=a.n(n);s.a},"739d":function(e,t,a){},"7b46":function(e,t,a){},"8caa":function(e,t,a){"use strict";var n=a("c654"),s=a.n(n);s.a},"907d":function(e,t,a){},"9c0c":function(e,t,a){},a7ab:function(e,t,a){"use strict";var n=a("c08a"),s=a.n(n);s.a},aac3:function(e,t,a){},abc2:function(e,t,a){},b25e:function(e,t,a){"use strict";var n=a("aac3"),s=a.n(n);s.a},bba8:function(e,t,a){"use strict";var n=a("03be"),s=a.n(n);s.a},bd7b:function(e,t,a){},c08a:function(e,t,a){},c654:function(e,t,a){},c828:function(e,t,a){},d047:function(e,t,a){},d4e1:function(e,t,a){},e466:function(e,t,a){"use strict";var n=a("739d"),s=a.n(n);s.a},ebc9:function(e,t,a){"use strict";var n=a("d4e1"),s=a.n(n);s.a}});
//# sourceMappingURL=app.ac1b8439.js.map