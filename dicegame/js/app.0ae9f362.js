(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],g=0,d=[];g<o.length;g++)r=o[g],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dicegame/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0175":function(e,t,s){"use strict";var a=s("3ac7"),n=s.n(a);n.a},"0556":function(e,t,s){},"0ad7":function(e,t,s){"use strict";var a=s("c828"),n=s.n(a);n.a},"3ac7":function(e,t,s){},"4c1b":function(e,t,s){"use strict";var a=s("0556"),n=s.n(a);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("d5e8"),s("5363");var a=s("2b0e"),n=s("ce5b"),i=s.n(n);s("bf40");a["default"].use(i.a);var r=new i.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#0d2b45",secondary:"#d08159",accent:"#544e68",error:"#6B120D",info:"#3B8A70",success:"#96C052",warning:"#D0AB59"}}}}),o=(s("907d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("div",{attrs:{id:"app"}},[s("GameHeader"),s("div",{staticClass:"main"},[s("router-view")],1),s("GameFooter")],1)])}),c=[],l=s("5530"),u=s("2f62"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gameFooter"},[s("GameFooterSettings")],1)},d=[],m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gameFooterSettings"},[s("GameFooterColors",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"color"===e.select},attrs:{color:e.settings.settings.color},on:{"update:color":function(t){return e.$set(e.settings.settings,"color",t)},select:e.update}}),s("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"size"===e.select},attrs:{value:e.settings.settings.size,type:"size"},on:{"update:value":function(t){return e.$set(e.settings.settings,"size",t)},select:e.update}}),s("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"players"===e.select},attrs:{value:e.settings.settings.players,type:"players"},on:{"update:value":function(t){return e.$set(e.settings.settings,"players",t)},select:e.update}}),s("GameFooterValue",{staticClass:"gameFooterSettings_select",class:{"gameFooterSettings_select-active":"mode"===e.select},attrs:{value:e.settings.settings.mode,type:"mode"},on:{"update:value":function(t){return e.$set(e.settings.settings,"mode",t)},select:e.update}}),s("div",{staticClass:"gameFooterSettings_content_container"},[s("div",{staticClass:"gameFooterSettings_content"},[s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-color",class:{"gameFooterSettings_color-inactive":!e.settingsState.showSettings},attrs:{text:""},on:{click:function(t){return e.toSelect("color")}}},[s("div",{staticClass:"gameFooterSettings_color",class:["gameFooterSettings_color-"+e.settings.settings.color]})]),s("div",{staticClass:"gameFooterSettings_content_right"},[s("div",{staticClass:"gameFooterSettings_content_right_grid",class:{"gameFooterSettings_content_right_grid-settings":e.settingsState.showSettings}},[s("div",{staticClass:"gameFooterSettings_content_controls"},[e.game.status<2&&2!==e.game.settings.mode?[e.game.player.isPlayer?s("div",[e._v("Make your move!")]):s("div",{staticClass:"results_message"},[s("v-btn",{staticClass:"results_message_btn",attrs:{color:"primary",large:""},on:{click:e.start}},[e._v("Start")])],1)]:2===e.game.status?[2===e.game.settings.mode?[e.game.player.isPlayer?s("GameFooterTimer"):s("GameFooterResults")]:[e.showResults?s("GameFooterResults"):s("v-btn",{attrs:{color:"primary",disabled:e.game.busy,large:""},on:{click:e.next}},[e._v("Next Turn")])]]:4===e.game.status?s("div",{staticClass:"results_message"},[s("v-btn",{staticClass:"results_message_btn",attrs:{color:"primary",large:""},on:{click:function(t){return e.newGame()}}},[e._v("Get Revenge!")])],1):5===e.game.status?s("div",{staticClass:"results_message"},[s("v-btn",{staticClass:"results_message_btn",attrs:{color:"primary",large:""},on:{click:function(t){return e.newGame(0===e.game.settings.mode)}}},[e._v(e._s(0===e.game.settings.mode?"TOO EASY!":"WIN MORE!"))])],1):e._e()],2),s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-size",attrs:{text:""},on:{click:function(t){return e.toSelect("size")}}},[s("div",{staticClass:"gameFooterSettings_link_icon icon icon-board",class:["icon-board-"+e.settings.settings.size]}),s("div",{staticClass:"gameFooterSettings_link_text"},[e._v("size")])]),s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-players",attrs:{text:""},on:{click:function(t){return e.toSelect("players")}}},[s("div",{staticClass:"gameFooterSettings_link_icon gameFooterSettings_link_icon-players icon icon-players"},[s("span",{staticClass:"gameFooterSettings_link_icon_text"},[e._v(e._s(e.settings.settings.players))])]),s("div",{staticClass:"gameFooterSettings_link_text"},[e._v("players")])]),s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-mode",attrs:{text:""},on:{click:function(t){return e.toSelect("mode")}}},[s("div",{staticClass:"gameFooterSettings_link_icon icon icon-mode",class:["icon-mode-"+e.settings.settings.mode]}),s("div",{staticClass:"gameFooterSettings_link_text"},[e._v("mode")])]),s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-play",attrs:{text:""},on:{click:function(t){return e.newGame()}}},[s("div",{staticClass:"gameFooterSettings_link_icon icon icon-dices"}),s("div",{staticClass:"gameFooterSettings_link_text"},[e._v("play")])]),s("v-btn",{staticClass:"gameFooterSettings_link gameFooterSettings_link-settings",attrs:{text:""},on:{click:e.toSettings}},[s("div",{staticClass:"gameFooterSettings_link_icon icon icon-settings"}),s("div",{staticClass:"gameFooterSettings_link_text"},[e._v("setup")])])],1)])],1)]),s("v-overlay",{staticClass:"gameFooterSettings_overlay",attrs:{value:!!e.select||e.game.status>0&&e.settingsState.showSettings||e.game.status>3,"z-index":1},nativeOn:{click:function(t){return e.closeOverlay(null)}}},[s("span",{staticClass:"gameFooterSettings_overlay_content",class:{"gameFooterSettings_overlay_content-active":!e.select}},[4===e.game.status?s("span",[e._v("You Lost")]):5===e.game.status?s("span",[e._v("WIN!")]):s("span",{staticClass:"gameFooterSettings_overlay_icon icon icon-pause"})])])],1)},h=[],f=(s("99af"),s("4de4"),s("c740"),s("4160"),s("a630"),s("caad"),s("c975"),s("d81d"),s("13d5"),s("a434"),s("d3b7"),s("2532"),s("3ca3"),s("159b"),s("ddb0"),s("d4ec")),v=s("bee2"),p=s("53ca"),S=s("ade3"),_=function e(){Object(f["a"])(this,e),Object(S["a"])(this,"getLocalStorage",(function(e){var t=localStorage.getItem(e);try{return null!==t?JSON.parse(t):null}catch(s){return t}})),Object(S["a"])(this,"setLocalStorage",(function(e,t){localStorage.setItem(e,"object"===Object(p["a"])(t)?JSON.stringify(t):t)})),Object(S["a"])(this,"removeLocalStorage",(function(e){localStorage.removeItem(e)})),Object(S["a"])(this,"clearLocalStorage",(function(){localStorage.clear()}))},y=new _,b={board:[],selected:null,defender:null,player:{},players:[],adjacents:[],settings:{players:4,size:4,mode:0,color:0},results:{},busy:!0,status:0},w={getBoard:function(){return JSON.parse(JSON.stringify(b.board))},getCell:function(e){return JSON.parse(JSON.stringify(b.board[e]))},getSelected:function(){return JSON.parse(JSON.stringify(b.selected))},getDefender:function(){return JSON.parse(JSON.stringify(b.defender))},getPlayer:function(){return JSON.parse(JSON.stringify(b.player))},getPlayers:function(){return JSON.parse(JSON.stringify(b.players))},getAdjacents:function(){return JSON.parse(JSON.stringify(b.adjacents))},getSettings:function(){return JSON.parse(JSON.stringify(b.settings))},getResults:function(){return JSON.parse(JSON.stringify(b.results))},getBusy:function(){return JSON.parse(JSON.stringify(b.busy))},getStatus:function(){return JSON.parse(JSON.stringify(b.status))}},k={setBoard:function(e,t){e.board=t},setCell:function(e,t){a["default"].set(e.board,t.i,t.data)},setSelected:function(e,t){e.selected=t},setDefender:function(e,t){e.defender=t},setPlayer:function(e,t){e.player=t},setPlayers:function(e,t){e.players=t},setAdjacents:function(e,t){e.adjacents=t},setSetting:function(e,t){e.settings=Object(l["a"])(Object(l["a"])({},e.settings),t),y.setLocalStorage("settings",e.settings)},setSettings:function(e,t){e.settings=t,y.setLocalStorage("settings",e.settings)},setResults:function(e,t){e.results=t},setBusy:function(e,t){e.busy=t},setStatus:function(e,t){e.status=t}},F={changeBoard:function(e,t){var s=e.commit;s("setBoard",t)},changeCell:function(e,t){var s=e.commit;s("setCell",t)},changeSelected:function(e,t){var s=e.commit;s("setSelected",t)},changeDefender:function(e,t){var s=e.commit;s("setDefender",t)},changePlayer:function(e,t){var s=e.commit;s("setPlayer",t)},changePlayers:function(e,t){var s=e.commit;s("setPlayers",t)},changeAdjacents:function(e,t){var s=e.commit;s("setAdjacents",t)},changeSetting:function(e,t){var s=e.commit;s("setSetting",t)},changeSettings:function(e,t){var s=e.commit;s("setSettings",t)},changeResults:function(e,t){var s=e.commit;s("setResults",t)},changeBusy:function(e,t){var s=e.commit;s("setBusy",t)},changeStatus:function(e,t){var s=e.commit;s("setStatus",t)}},O={namespaced:!0,state:b,getters:w,actions:F,mutations:k},C={isMobile:!1,showSettings:!0},j={getIsMobile:function(){return JSON.parse(JSON.stringify(C.isMobile))},getShowSettings:function(){return JSON.parse(JSON.stringify(C.showSettings))}},P={setIsMobile:function(e,t){e.isMobile=t},setShowSettings:function(e,t){e.showSettings=t}},x={changeIsMobile:function(e,t){var s=e.commit;s("setIsMobile",t)},changeShowSettings:function(e,t){var s=e.commit;s("setShowSettings",t)}},M={namespaced:!0,state:C,getters:j,actions:x,mutations:P};a["default"].use(u["a"]);var N=new u["a"].Store({state:{},mutations:{},actions:{},modules:{game:O,settings:M}}),z=[[.837963,.443673,.152006,.03588,.006105,766e-6,71e-6,5e-6],[.972994,.778549,.453575,.191701,.060713,.014879,.00289,452e-6],[.997299,.939236,.742831,.459528,.220442,.083423,.02545,.006379],[.99985,.98794,.909347,.718078,.463654,.242449,.103626,.036742],[.999996,.998217,.9753,.883953,.699616,.466731,.259984,.121507],[1,.999801,.994663,.961536,.862377,.685165,.469139,.274376],[1,.999983,.999069,.989534,.947731,.843874,.673456,.471091]],G=[[.675926,.331019,-.391976,-.8206,-.96337,-.994638,-.999432,-.999955],[.918982,1.114196,.267875,-.849794,-1.575009,-1.880968,-1.97399,-1.99548],[.989196,1.69618,1.456986,.216696,-1.236464,-2.249193,-2.7455,-2.929831],[.99925,1.92764,2.365429,1.744624,.172886,-1.57551,-2.860114,-3.559096],[.999976,1.987519,2.8024,2.955577,1.99616,.134041,-1.880192,-3.420409],[1,1.998408,2.951967,3.61536,3.486147,2.22198,.098807,-2.158736],[1,1.999847,2.99069,3.884874,4.372772,3.970362,2.428384,.066365]],B=[{name:"16",value:4},{name:"25",value:5},{name:"36",value:6}],$=[{name:"normal",value:0},{name:"hard",value:1},{name:"timer",value:2}],T=[{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8}],J=function(){function e(){Object(f["a"])(this,e)}return Object(v["a"])(e,[{key:"aiMove",value:function(e){var t=N.getters["game/getPlayer"],s=N.getters["game/getBoard"],a=N.getters["game/getAdjacents"],n=N.getters["game/getSettings"],i=s.filter((function(e){return e.owner===t.id&&e.dice>1})),r=-8*t.cells+t.total+t.size+t.reserve,o=.52-.12*t.aggresive;n.mode>0&&(o+=Math.min(e,5)*(.2-.08*t.aggresive)),(r>=0||t.size>Math.pow(n.size,1.4))&&(o=Math.min(o,.44));var c=[];return 0!==i.length&&(i.forEach((function(e){a[e.id].forEach((function(a){var n=s[a];if(n.owner!==t.id){var i=z[e.dice-2][n.dice-1],r=G[e.dice-2][n.dice-1];if(i>o){var l={attacker:e.id,defender:a,owner:n.owner,probability:i,gainProbability:r,weighedBenefit:1};c.push(l)}}}))})),n.mode>0&&(c=this.attackBiggest(c),c=this.simulateMoves(c)),0!==c.length&&(c.sort((function(e,t){return e.gainProbability<t.gainProbability?1:-1})),c.sort((function(e,t){return e.weighedBenefit<t.weighedBenefit?1:-1})),c[0]))}},{key:"attackBiggest",value:function(e){var t=N.getters["game/getPlayer"],s=N.getters["game/getPlayers"],a=N.getters["game/getSettings"],n=Math.pow(a.size,2)/2+Math.round(-2*t.aggresive+1),i=s.filter((function(e){return e.id!==t.id&&e.size>=n}));return i.length?e.filter((function(e){return e.owner===i[0].id})):e.map((function(e){var t=s.filter((function(t){return t.id===e.owner}))[0].size;return e.weighedBenefit=.8+Math.pow(a.size,2)/2/t*.4,e}))}},{key:"simulateMoves",value:function(e){var t=this,s=N.getters["game/getPlayer"],a=N.getters["game/getBoard"];return e.forEach((function(e){var n=JSON.parse(JSON.stringify(a));n[e.defender].dice=n[e.attacker].dice-1,n[e.defender].owner=s.id,n[e.attacker].dice=1,e.gain=t.calculateMoveResult(n,s.id),e.lose=-1*t.calculateMoveResult(n,e.owner),e.benefit=e.gain*(-2*s.aggresive+2.5)+e.lose,e.weighedBenefit*=e.benefit*(e.probability+2)})),e}},{key:"calculateMoveResult",value:function(e,t){var s=N.getters["game/getAdjacents"],a=N.getters["game/getPlayers"],n=[];e.forEach((function(e,s){e.owner===t&&n.push(s)}));for(var i=1,r=0;r<n.length;r++)n[r]>-1&&function(){var e=[];e.push(n[r]),delete n[r];for(var t=0;t<e.length;t++)s[e[t]].forEach((function(t){if(n.includes(t)){e.push(t);var s=n.indexOf(t);delete n[s]}}));i=Math.max(e.length,i)}();var o=a[a.findIndex((function(e){return e.id===t}))];return o?i-o.size:-1}}]),e}(),E=new J,A=function(){function e(){Object(f["a"])(this,e)}return Object(v["a"])(e,[{key:"changeBoard",value:function(){var e=N.getters["game/getSettings"],t=[],s=[],a=Math.pow(e.size,2),n=Math.floor(a/e.players),i=a%e.players,r=e.color<e.players?Array.from(Array(e.players).keys()):Array.from(Array(e.players-1).keys()).concat([e.color]);r.unshift(r.splice(r.indexOf(e.color),1)[0]),r.forEach((function(e){for(var a=[],r=0,o=e-i<0?n+1:n,c=0;c<o;c++){var l=3*Math.random();r+=l,a.push(l)}var u=2*o/r*(n/o);a=a.map((function(e){return 1+Math.floor(e*u)}));var g=a.reduce((function(e,t){return e+t}),0),d={id:e,cells:o,total:g};s.push(d);for(var m=0;m<o;m++)t.push({owner:e,dice:a[m]})})),t=t.sort((function(){return Math.random()-.5})),t=t.map((function(e,t){return e.id=t,e})),this.setAdjacents(),N.dispatch("game/changeBoard",t),N.dispatch("game/changePlayers",s)}},{key:"newGame",value:function(){var e=this,t=N.getters["game/getSettings"];this.changeBoard();var s=N.getters["game/getPlayers"].map((function(s){return s.isPlayer=s.id===t.color,s.size=e.calculateAdd(s.id),s.reserve=0,s.aggresive=t.mode>0?Math.round(100*Math.random())/100:.5,s}));t.mode>0&&(s=s.sort((function(){return Math.random()-.5}))),N.dispatch("game/changePlayer",s[0]),N.dispatch("game/changePlayers",s),N.dispatch("game/changeSelected",null),N.dispatch("game/changeResults",{}),N.dispatch("game/changeStatus",1),s[0].isPlayer?(N.dispatch("game/changeBusy",!1),2===t.mode&&N.dispatch("game/changeStatus",2)):(N.dispatch("game/changeBusy",!0),2===t.mode&&this.startGame())}},{key:"startGame",value:function(){this.aiMoves(0)}},{key:"setAdjacents",value:function(){for(var e=N.getters["game/getSettings"].size,t=[],s=Math.pow(e,2),a=0;a<s;a++){var n=[];a%e&&n.push(a-1),(a+1)%e&&n.push(a+1),a>=e&&n.push(a-e),a<e*e-e&&n.push(a+e),t.push(n)}N.dispatch("game/changeAdjacents",t)}},{key:"changeSelected",value:function(e){N.dispatch("game/changeStatus",2),N.dispatch("game/changeSelected",e)}},{key:"changePlayer",value:function(e){N.dispatch("game/changePlayer",e)}},{key:"attack",value:function(e){var t=this;return new Promise((function(s){var a=N.getters["game/getSelected"],n=N.getters["game/getBoard"],i=n[a],r=n[e],o=t.dice(i.dice),c=t.dice(r.dice),l=r.owner;o.cell=a,c.cell=e,N.dispatch("game/changeResults",{attacker:i.owner,defender:l,attackerDice:o,defenderDice:c}),N.dispatch("game/changeDefender",e),0===i.owner&&N.dispatch("game/changeBusy",!0),setTimeout((function(){N.dispatch("game/changeDefender",null),o.total>c.total?(r.dice=i.dice-1,r.owner=i.owner,N.dispatch("game/changeCell",{i:e,data:r}),t.checkLost(l)||(r.dice>1?N.dispatch("game/changeSelected",e):N.dispatch("game/changeSelected",null),t.calculateAdd(l))):N.dispatch("game/changeSelected",null),t.calculateAdd(i.owner),i.dice=1,N.dispatch("game/changeCell",{i:a,data:i}),0===i.owner&&N.dispatch("game/changeBusy",!1),s({status:200})}),500)}))}},{key:"dice",value:function(e){for(var t=0,s=[],a=0;a<e;a++){var n=Math.floor(6*Math.random())+1;s.push(n),t+=n}return{total:t,dice:s}}},{key:"checkLost",value:function(e){var t=N.getters["game/getBoard"],s=N.getters["game/getPlayers"];if(!t.filter((function(t){return t.owner===e})).length){var a=s.findIndex((function(t){return t.id===e}));if(s[a].isPlayer&&(N.dispatch("game/changeStatus",4),N.dispatch("game/changeSelected",null)),s.splice(a,1),N.dispatch("game/changePlayers",s),1===s.length)return N.dispatch("game/changeSelected",null),s[0].isPlayer&&N.dispatch("game/changeStatus",5),!0}return!1}},{key:"nextPlayer",value:function(){var e=this;this.applyAdd(),setTimeout((function(){var t=N.getters["game/getPlayer"],s=N.getters["game/getPlayers"],a=s.findIndex((function(e){return e.id===t.id})),n=s[(a+1)%s.length];N.dispatch("game/changePlayer",n),N.dispatch("game/changeSelected",null),n.isPlayer?N.dispatch("game/changeBusy",!1):(N.dispatch("game/changeBusy",!0),e.aiMoves(0))}),500)}},{key:"aiMoves",value:function(e){var t=this,s=E.aiMove(e);if(!1!==s){var a=N.getters["game/getSelected"],n=s.attacker!==a?750:10;setTimeout((function(){s.attacker!==a&&t.changeSelected(s.attacker),setTimeout((function(){var a=t;t.attack(s.defender).then((function(t){4!==N.getters["game/getStatus"]&&a.aiMoves(++e)}))}),200)}),n)}else this.nextPlayer()}},{key:"getPlayerCells",value:function(e){var t=[];return N.getters["game/getBoard"].forEach((function(s,a){s.owner===e&&t.push(a)})),t}},{key:"calculateAdd",value:function(e){for(var t=N.getters["game/getAdjacents"],s=N.getters["game/getPlayers"],a=N.getters["game/getBoard"],n=this.getPlayerCells(e),i=1,r=n.reduce((function(e,t){return e+a[t].dice}),0),o=n.length,c=0;c<n.length;c++)n[c]>-1&&function(){var e=[];e.push(n[c]),delete n[c];for(var s=0;s<e.length;s++)t[e[s]].forEach((function(t){if(n.includes(t)){e.push(t);var s=n.indexOf(t);delete n[s]}}));i=Math.max(e.length,i)}();var l=s[s.findIndex((function(t){return t.id===e}))];if(l){l.size=i,l.total=r,l.cells=o,N.dispatch("game/changePlayers",s);var u=N.getters["game/getPlayer"];l.id===u.id&&N.dispatch("game/changePlayer",l)}return i}},{key:"applyAdd",value:function(){var e=N.getters["game/getBoard"],t=N.getters["game/getPlayer"],s=this.getPlayerCells(t.id),a=+t.size+t.reserve;for(a;a>0&&s.length;a--){var n=s[Math.floor(Math.random()*s.length)];e[n].dice>7?(s.splice(s.indexOf(n),1),a++):e[n].dice++}t.reserve=a;var i=N.getters["game/getPlayers"];i[i.findIndex((function(e){return e.id===t.id}))]=t,N.dispatch("game/changePlayers",i),N.dispatch("game/changeBoard",e)}}]),e}(),R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"gameFooterSelect",staticClass:"gameFooterSelect gameFooterSelect-color",on:{"&scroll":function(t){return e.onScroll(t)},touchend:e.onScrollEnd}},[e._l(8,(function(t,a){return s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a,staticClass:"gameFooterSelect_select",on:{click:function(t){return e.select(a)}}},[s("div",{staticClass:"gameFooterSelect_select_content",style:{transform:e.getTransform(a)}},[s("div",{staticClass:"gameFooterSelect_color",class:["gameFooterSelect_color-"+a]})])])})),s("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-end gameFooterSelect_padding-end-color"})],2)])},D=[],L={name:"GameFooterColors",computed:Object(u["c"])({settings:function(e){return e.game.settings}}),props:{color:{default:1}},data:function(){return{selected:0,zoom:1.5,next:1,zoomNext:1}},mounted:function(){this.selected=this.color,this.$refs.gameFooterSelect.scrollTo({top:0,left:80*this.color})},methods:{select:function(e){this.$refs.gameFooterSelect.scrollTo({top:0,left:80*e,behavior:"smooth"}),this.$emit("update:color",e),this.$emit("select",!0)},onScroll:function(e){var t=e.srcElement.scrollLeft/80,s=Math.round(t);this.selected!==s&&(this.selected=s,this.$emit("update:color",this.selected));var a=t-this.selected;this.next=a>0?this.selected+1:this.selected-1,a=Math.abs(a),this.zoom=1.5-a/2,this.zoomNext=1+a/2},onScrollEnd:function(){var e=this;if(this.pos-this.$refs.gameFooterSelect.scrollLeft)return this.pos=this.$refs.gameFooterSelect.scrollLeft,void setTimeout((function(){e.onScrollEnd()}),100);this.pos=this.$refs.gameFooterSelect.scrollLeft;var t=80*this.selected;this.$refs.gameFooterSelect.scrollTo({top:0,left:t,behavior:"smooth"})},getTransform:function(e){switch(e){case this.selected:return"scale("+this.zoom+")";case this.next:return"scale("+this.zoomNext+")"}return"scale(1)"}}},I=L,V=(s("8caa"),s("2877")),H=Object(V["a"])(I,R,D,!1,null,null,null),q=H.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"gameFooterTimer",on:{click:e.next}},[s("span",{staticClass:"gameFooterTimer_countdown"},[e._v("00:"+e._s(e.timer>9?"":"0")+e._s(e.timer))])])},Y=[],K={name:"GameFooterTimer",computed:Object(u["c"])({game:function(e){return e.game}}),data:function(){return{gameService:new A,timer:11,countDown:null,delay:250}},mounted:function(){this.timer=2*this.game.settings.size+1,this.count()},methods:Object(l["a"])({count:function(){var e=this;this.timer--,this.countDown=setTimeout((function(){e.count()}),1e3)},next:function(){this.timer=0}},Object(u["b"])("game",["changeBusy"])),watch:{timer:function(e){var t=this;this.timer<1&&(clearTimeout(this.countDown),this.game.busy&&(this.delay=1e3),this.changeBusy(!0),setTimeout((function(){t.gameService.nextPlayer()}),this.delay))}}},Q=K,U=(s("599a"),Object(V["a"])(Q,W,Y,!1,null,null,null)),X=U.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.game.results&&e.game.results.attackerDice?s("div",{staticClass:"results"},[s("div",{staticClass:"results_side results_side-attacker",class:{"results_side-win":e.game.results.attackerDice.total>e.game.results.defenderDice.total}},[s("div",{staticClass:"results_result"},[s("div",{staticClass:"results_dices",class:["results_dices-"+e.game.results.attackerDice.dice.length]},e._l(e.game.results.attackerDice.dice,(function(e,t){return s("div",{key:t,staticClass:"results_dice",class:["results_dice-"+e]})})),0)]),s("div",{staticClass:"results_color",class:[{"results_color-player":e.game.results.attacker===e.game.settings.color},"results_color-"+e.game.results.attacker]},[e._v(e._s(e.game.results.attackerDice.total))])]),s("div",{staticClass:"results_vs icon icon-swords"}),s("div",{staticClass:"results_side results_side-defender",class:{"results_side-win":e.game.results.attackerDice.total<=e.game.results.defenderDice.total}},[s("div",{staticClass:"results_color",class:[{"results_color-player":e.game.results.defender===e.game.settings.color},"results_color-"+e.game.results.defender]},[e._v(e._s(e.game.results.defenderDice.total))]),s("div",{staticClass:"results_result"},[s("div",{staticClass:"results_dices",class:["results_dices-"+e.game.results.defenderDice.dice.length]},e._l(e.game.results.defenderDice.dice,(function(e,t){return s("div",{key:t,staticClass:"results_dice",class:["results_dice-"+e]})})),0)])])]):e._e()},ee=[],te={name:"GameFooterResults",computed:Object(u["c"])({game:function(e){return e.game},gameResults:function(e){return e.game.results}}),data:function(){return{gameService:new A,resultsActive:!1}},methods:{},watch:{gameResults:function(){this.resultsActive=!0}}},se=te,ae=(s("b352"),Object(V["a"])(se,Z,ee,!1,null,"0ed85acd",null)),ne=ae.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"gameFooterSelect",staticClass:"gameFooterSelect",class:["gameFooterSelect-"+e.type],on:{"&scroll":function(t){return e.onScroll(t)},touchend:e.onScrollEnd}},[s("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-start",class:["gameFooterSelect_padding-start-"+e.type]}),e._l(e.val,(function(t,a){return s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.value,ref:"select-"+a,refInFor:!0,staticClass:"gameFooterSelect_select",on:{click:function(s){return e.select(t.value,a)}}},[s("div",{staticClass:"gameFooterSelect_select_content",style:{transform:e.getTransform(a)}},["size"===e.type?s("span",{staticClass:"gameFooterSelect_select_icon icon",class:["icon-board-"+t.value]},[s("span",{staticClass:"gameFooterSelect_select_text"},[e._v(e._s(t.value))])]):"mode"===e.type?s("span",{staticClass:"gameFooterSelect_select_icon icon",class:["icon-mode-"+t.value]}):[e._v(e._s(t.name))]],2)])})),s("div",{staticClass:"gameFooterSelect_padding gameFooterSelect_padding-end",class:["gameFooterSelect_padding-end-"+e.type]})],2)])},re=[],oe={name:"GameFooterValue",props:{type:{default:"size"},value:{default:1}},computed:Object(u["c"])({settings:function(e){return e.game.settings},val:function(){var e=B;switch(this.type){case"players":e=T;break;case"mode":e=$;break}return e}}),data:function(){return{boardSizes:B,difficulties:$,players:T,selected:0,zoom:1.5,next:1,zoomNext:1,pos:0}},mounted:function(){this.setValue()},methods:{setValue:function(){var e=this;this.selected=this.value;var t=this.val.findIndex((function(t){return t.value===e.value}));this.$refs.gameFooterSelect.scrollTo({top:0,left:80*t})},select:function(e,t){var s=80*t;this.$refs.gameFooterSelect.scrollTo({top:0,left:s,behavior:"smooth"}),this.$emit("update:value",e),this.$emit("select",!0)},onScroll:function(e){var t=e.srcElement.scrollLeft/80,s=Math.round(t);this.selected!==s&&(this.selected=s,this.$emit("update:value",this.val[s].value));var a=t-this.selected;this.next=a>0?this.selected+1:this.selected-1,a=Math.abs(a),this.zoom=1.5-a/2,this.zoomNext=1+a/2},onScrollEnd:function(){var e=this;if(this.pos!==this.$refs.gameFooterSelect.scrollLeft)return this.pos=this.$refs.gameFooterSelect.scrollLeft,void setTimeout((function(){e.onScrollEnd()}),50);this.pos=this.$refs.gameFooterSelect.scrollLeft;var t=80*this.selected;this.$refs.gameFooterSelect.scrollTo({top:0,left:t,behavior:"smooth"})},getTransform:function(e){switch(e){case this.selected:return"scale("+this.zoom+")";case this.next:return"scale("+this.zoomNext+")"}return"scale(1)"}},watch:{value:function(e){var t=this,s=this.val.findIndex((function(e){return e.value===t.value}));this.selected!==s&&this.setValue()}}},ce=oe,le=Object(V["a"])(ce,ie,re,!1,null,null,null),ue=le.exports,ge={name:"GameFooterSettings",components:{GameFooterColors:q,GameFooterTimer:X,GameFooterResults:ne,GameFooterValue:ue},computed:Object(u["c"])({game:function(e){return e.game},settingsState:function(e){return e.settings},gameResults:function(e){return e.game.results}}),data:function(){return{gameService:new A,settings:{settings:{}},select:null,showSettings:!0,showResults:!1}},mounted:function(){this.$set(this.settings,"settings",JSON.parse(JSON.stringify(this.game.settings)))},methods:Object(l["a"])(Object(l["a"])({toSelect:function(e){this.select=e},update:function(){setTimeout((function(e){e.select=null}),300,this)},newGame:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.$set(this.settings.settings,"mode",this.settings.settings.mode+1),this.changeSettings(JSON.parse(JSON.stringify(this.settings.settings))),this.select=null,this.changeShowSettings(!1),this.gameService.newGame()},toSettings:function(){this.changeShowSettings(!0)},start:function(){this.gameService.startGame()},next:function(){this.gameService.nextPlayer()},closeOverlay:function(){this.select=!1,this.game.status>0&&this.changeShowSettings(!1)}},Object(u["b"])("game",["changeSettings"])),Object(u["b"])("settings",["changeShowSettings"])),watch:{gameResults:function(e){this.showResults=!0;var t=this.game.player.isPlayer?750:1500;setTimeout((function(t){t.gameResults===e&&(t.showResults=!1)}),t,this)}}},de=ge,me=(s("0175"),Object(V["a"])(de,m,h,!1,null,null,null)),he=me.exports,fe={name:"GameFooter",components:{GameFooterSettings:he},computed:Object(u["c"])({settings:function(e){return e.game.settings}})},ve=fe,pe=(s("0ad7"),Object(V["a"])(ve,g,d,!1,null,null,null)),Se=pe.exports,_e=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ye=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gameHeader"},[s("div",{staticClass:"gameHeader_content"},[s("span",{staticClass:"gameHeader_icon icon icon-dices"}),s("span",{staticClass:"gameHeader_text"},[e._v("Dice Game")])])])}],be={name:"GameHeader",computed:Object(u["c"])({}),data:function(){return{}},methods:{}},we=be,ke=(s("596d"),Object(V["a"])(we,_e,ye,!1,null,"c05ad972",null)),Fe=ke.exports,Oe={name:"App",components:{GameFooter:Se,GameHeader:Fe},computed:Object(u["c"])({isMobile:function(e){return e.settings.isMobile}}),data:function(){return{webStorageService:new _}},created:function(){this.$nextTick((function(){window.addEventListener("resize",this.setMobile),this.setMobile()}));var e=this.webStorageService.getLocalStorage("settings");e&&this.changeSettings(e)},methods:Object(l["a"])(Object(l["a"])({setMobile:function(e){var t=document.documentElement.clientWidth<768;t!==this.isMobile&&this.changeIsMobile(t)}},Object(u["b"])("settings",["changeIsMobile"])),Object(u["b"])("game",["changeSettings"]))},Ce=Oe,je=(s("5c0b"),Object(V["a"])(Ce,o,c,!1,null,null,null)),Pe=je.exports,xe=s("9483");Object(xe["a"])("".concat("/dicegame/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Me=s("8c4f"),Ne=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ze=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rules"},[s("h1",[e._v("Rules")]),s("ul",[s("li",[e._v("The player who holds all the squares in the grid wins")]),s("li",[e._v("You can attack any adjecent square held by another color if you have at least 2 dices")]),s("li",[e._v("After each turn dices will be randomly added to your squares "),s("ul",[s("li",[e._v("The amount is determined by the largest group of adjecent squares you have")]),s("li",[e._v("The maximum amount is 8 dices in a square")]),s("li",[e._v("If more dices can't be added the remaining will be held in reserve to use later")])])])])])}],Ge={},Be=Object(V["a"])(Ge,Ne,ze,!1,null,null,null),$e=Be.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"touch",rawName:"v-touch:swipe.left",value:e.swipedLeft,expression:"swipedLeft",arg:"swipe",modifiers:{left:!0}}],staticClass:"game",on:{click:e.deselect}},[s("GamePlayers"),s("div",{staticClass:"game_board",class:["game_board-size-"+e.game.settings.size,{"game_board-busy":e.game.busy}],on:{click:e.boardClick}},e._l(e.game.board,(function(t,a){return s("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a,staticClass:"game_cell",class:[{"game_cell-selectable":e.selectable(a,t.owner,t.dice)},{"game_cell-selected":a===e.game.selected},{"game_cell-borderTop":e.borderTop(a,t.owner)},{"game_cell-borderRight":e.borderRight(a,t.owner)},{"game_cell-borderBottom":e.borderBottom(a,t.owner)},{"game_cell-borderLeft":e.borderLeft(a,t.owner)},"game_cell-defender-"+e.isAttacked(a),"game_cell-owner-"+t.owner],attrs:{depressed:a!==e.game.selected},on:{click:function(s){return e.select(a,t.owner)}}},[s("div",{staticClass:"game_cell_dices"},[s("div",{staticClass:"game_cell_dices_left"},e._l(Math.min(t.dice,4),(function(e,t){return s("div",{key:t,staticClass:"game_cell_dice"})})),0),t.dice>4?s("div",{staticClass:"game_cell_dices_right"},e._l(t.dice-4,(function(e,t){return s("div",{key:t,staticClass:"game_cell_dice"})})),0):e._e()])])})),0)],1)},Je=[],Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gamePlayers_container"},[s("div",{staticClass:"gamePlayers"},e._l(e.game.players,(function(t){return s("div",{key:t.id,ref:"player"+t.id,refInFor:!0,staticClass:"gamePlayers_player"},[s("div",{staticClass:"gamePlayers_player_color",class:[{"gamePlayers_player_color-active":t.id===e.playerId},"gamePlayers_player_color-"+t.id]},[e._v(e._s(t.size))]),s("div",{staticClass:"gamePlayers_player_reserve"},[e._v("(+"+e._s(t.reserve)+")")])])})),0)])},Ae=[],Re={name:"GamePlayers",computed:Object(u["c"])({game:function(e){return e.game},playerId:function(e){return e.game.player.id}}),data:function(){return{newGameDialog:!1}},methods:{},watch:{playerId:function(e){var t=this.$refs["player"+(e+1)];t&&t[0]&&t[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}},De=Re,Le=(s("4c1b"),Object(V["a"])(De,Ee,Ae,!1,null,"2ac8c5cc",null)),Ie=Le.exports,Ve={name:"Game",components:{GamePlayers:Ie},computed:Object(u["c"])({game:function(e){return e.game}}),data:function(){return{gameService:new A}},methods:Object(l["a"])(Object(l["a"])({select:function(e,t){e===this.game.selected?this.deselect():t===this.game.player.id?this.gameService.changeSelected(e):this.gameService.attack(e)},selectable:function(e,t,s){var a=t===this.game.player.id&&s>1,n=null!==this.game.selected&&this.game.adjacents[this.game.selected].includes(e);return a||n},boardClick:function(e){e.stopPropagation(),this.game.board.length<1?(this.gameService.newGame(),this.changeShowSettings(!1)):this.game.status<2&&!this.game.player.isPlayer&&this.gameService.startGame()},deselect:function(){this.changeSelected(null)},borderTop:function(e,t){var s=e-this.game.settings.size;return!(e>=this.game.settings.size&&this.game.board[s]&&this.game.board[s].owner===t)},borderRight:function(e,t){var s=e+1;return!(s%this.game.settings.size&&this.game.board[s]&&this.game.board[s].owner===t)},borderBottom:function(e,t){var s=e+this.game.settings.size;return!(e<this.game.settings.size*(this.game.settings.size-1)&&this.game.board[s]&&this.game.board[s].owner===t)},borderLeft:function(e,t){var s=e-1;return!(e%this.game.settings.size&&this.game.board[s]&&this.game.board[s].owner===t)},isAttacked:function(e){return e===this.game.defender&&(this.game.defender+1===this.game.selected?"right game_cell-defender":this.game.defender-1===this.game.selected?"left game_cell-defender":this.game.defender<this.game.selected?"bottom game_cell-defender":this.game.defender>this.game.selected?"top game_cell-defender":void 0)},swipedLeft:function(){2===this.game.status&&this.game.player.isPlayer&&this.gameService.nextPlayer()}},Object(u["b"])("game",["changeSelected"])),Object(u["b"])("settings",["changeShowSettings"]))},He=Ve,qe=(s("9d26"),Object(V["a"])(He,Te,Je,!1,null,"1d9e4e87",null)),We=qe.exports;a["default"].use(Me["a"]);var Ye=[{path:"/",name:"Game",component:We},{path:"/rules",name:"Rules",component:$e},{path:"/game",name:"Game",component:We}],Ke=new Me["a"]({mode:"history",base:"/dicegame/",routes:Ye}),Qe=Ke,Ue=s("0086"),Xe=s.n(Ue),Ze=s("fe3c"),et=s.n(Ze),tt=s("7707"),st=s.n(tt);a["default"].use(Xe.a),window.addEventListener("load",(function(){et.a.attach(document.body)}),!1),st.a.polyfill(),a["default"].config.productionTip=!1,new a["default"]({router:Qe,store:N,vuetify:r,render:function(e){return e(Pe)}}).$mount("#app")},"596d":function(e,t,s){"use strict";var a=s("e43f"),n=s.n(a);n.a},"599a":function(e,t,s){"use strict";var a=s("abc2"),n=s.n(a);n.a},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},"84de":function(e,t,s){},"8caa":function(e,t,s){"use strict";var a=s("c654"),n=s.n(a);n.a},"907d":function(e,t,s){},"9c0c":function(e,t,s){},"9d26":function(e,t,s){"use strict";var a=s("84de"),n=s.n(a);n.a},abc2:function(e,t,s){},b352:function(e,t,s){"use strict";var a=s("d582"),n=s.n(a);n.a},c654:function(e,t,s){},c828:function(e,t,s){},d582:function(e,t,s){},e43f:function(e,t,s){}});
//# sourceMappingURL=app.0ae9f362.js.map