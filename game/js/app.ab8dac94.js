(function(e){function t(t){for(var a,o,c=t[0],i=t[1],l=t[2],u=0,g=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&g.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(g.length)g.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var i=r[o];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={app:0},s=[];function o(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a7201717"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=a);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=o(e);var l=new Error;s=function(t){i.onerror=i.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,r[1](l)}n[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("d5e8"),r("5363"),r("907d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v("| "),r("router-link",{attrs:{to:"/about"}},[e._v("About")]),e._v("| "),r("router-link",{attrs:{to:"/game"}},[e._v("Game")])],1),r("router-view")],1)])},s=[],o={name:"App",data:function(){return{}}},c=o,i=r("2877"),l=Object(i["a"])(c,n,s,!1,null,null,null),u=l.exports,d=r("9483");Object(d["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("d3b7");var g=r("8c4f"),f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("img",{attrs:{alt:"Vue logo",src:r("cf05")}})])}],h={name:"Home"},p=h,v=Object(i["a"])(p,f,m,!1,null,null,null),y=v.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game"},[r("div",{staticClass:"game_board",style:{width:100*e.game.settings.size+4+"px"}},e._l(e.game.board,(function(t,a){return r("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a,staticClass:"game_cell",class:[{"game_cell-selectable":e.selectable(a,t.owner,t.dice)},{"game_cell-selected":a===e.game.selected},{"game_cell-borderTop":e.borderTop(a,t.owner)},{"game_cell-borderRight":e.borderRight(a,t.owner)},{"game_cell-borderBottom":e.borderBottom(a,t.owner)},{"game_cell-borderLeft":e.borderLeft(a,t.owner)},"game_cell-owner-"+t.owner],attrs:{depressed:a!==e.game.selected},on:{click:function(r){return e.select(a,t.owner)}}},[r("div",{staticClass:"game_cell_dices"},e._l(t.dice,(function(e,t){return r("div",{key:t,staticClass:"game_cell_dice"})})),0)])})),0),r("GameControls")],1)},b=[],w=(r("caad"),r("2532"),r("2f62")),S=(r("4de4"),r("c740"),r("4160"),r("c975"),r("d81d"),r("a434"),r("159b"),r("d4ec")),k=r("bee2"),C=r("ade3"),O=r("5530"),P={board:[],selected:null,player:{},players:[],adjacents:[],settings:{players:4,size:4},results:{}},j={getBoard:function(){return JSON.parse(JSON.stringify(P.board))},getCell:function(e){return JSON.parse(JSON.stringify(P.board[e]))},getSelected:function(){return JSON.parse(JSON.stringify(P.selected))},getPlayer:function(){return JSON.parse(JSON.stringify(P.player))},getPlayers:function(){return JSON.parse(JSON.stringify(P.players))},getAdjacents:function(){return JSON.parse(JSON.stringify(P.adjacents))},getSettings:function(){return JSON.parse(JSON.stringify(P.settings))},getResults:function(){return JSON.parse(JSON.stringify(P.results))}},A={setBoard:function(e,t){e.board=t},setCell:function(e,t){a["default"].set(e.board,t.i,t.data)},setSelected:function(e,t){e.selected=t},setPlayer:function(e,t){e.player=t},setPlayers:function(e,t){e.players=t},setAdjacents:function(e,t){e.adjacents=t},setSetting:function(e,t){e.settings=Object(O["a"])(Object(O["a"])({},e.settings),{},Object(C["a"])({},t.key,t.value))},setResults:function(e,t){e.results=t}},x={changeBoard:function(e,t){var r=e.commit;r("setBoard",t)},changeCell:function(e,t){var r=e.commit;r("setCell",t)},changeSelected:function(e,t){var r=e.commit;r("setSelected",t)},changePlayer:function(e,t){var r=e.commit;r("setPlayer",t)},changePlayers:function(e,t){var r=e.commit;r("setPlayers",t)},changeAdjacents:function(e,t){var r=e.commit;r("setAdjacents",t)},changeSetting:function(e,t){var r=e.commit;r("setSetting",t)},changeResults:function(e,t){var r=e.commit;r("setResults",t)}},N={namespaced:!0,state:P,getters:j,actions:x,mutations:A};a["default"].use(w["a"]);var J=new w["a"].Store({state:{},mutations:{},actions:{},modules:{game:N}}),z=function(){function e(){Object(S["a"])(this,e)}return Object(k["a"])(e,[{key:"changeBoard",value:function(){for(var e=J.getters["game/getSettings"],t=[],r=Math.pow(e.size,2),a=Math.floor(r/e.players),n=r%e.players,s=function(){var e=[],r=0,s=o-n<0?a+1:a;for(c=0;c<s;c++){var l=Math.floor(3*Math.random())+1;r+=l,e.push(l)}var u=3*s/r;for(e=e.map((function(e){return Math.round(e*u)})),i=0;i<s;i++)t.push({owner:o,dice:e[i]})},o=0;o<e.players;o++){var c,i;s()}t=t.sort((function(){return Math.random()-.5})),this.setAdjacents(),J.dispatch("game/changeBoard",t)}},{key:"startGame",value:function(){var e=J.getters["game/getSettings"];this.changeBoard();for(var t=[],r=0;r<e.players;r++){var a={id:r,size:this.calculateAdd(r),reserve:0};t.push(a)}J.dispatch("game/changePlayer",t[0]),J.dispatch("game/changePlayers",t)}},{key:"setAdjacents",value:function(){for(var e=J.getters["game/getSettings"].size,t=[],r=Math.pow(e,2),a=0;a<r;a++){var n=[];a%e&&n.push(a-1),(a+1)%e&&n.push(a+1),a>=e&&n.push(a-e),a<e*e-e&&n.push(a+e),t.push(n)}J.dispatch("game/changeAdjacents",t)}},{key:"changeSelected",value:function(e){J.dispatch("game/changeSelected",e)}},{key:"changePlayer",value:function(e){J.dispatch("game/changePlayer",e)}},{key:"attack",value:function(e){var t=J.getters["game/getSelected"],r=J.getters["game/getBoard"],a=r[t],n=r[e],s=this.dice(a.dice),o=this.dice(n.dice),c=n.owner;s.total>o.total?(n.dice=a.dice-1,n.owner=a.owner,J.dispatch("game/changeCell",{i:e,data:n}),this.checkLost(c)||(n.dice>1?J.dispatch("game/changeSelected",e):J.dispatch("game/changeSelected",null),this.calculateAdd(c))):J.dispatch("game/changeSelected",null),this.calculateAdd(a.owner),a.dice=1,J.dispatch("game/changeResults",{attacker:a.owner,defender:c,attackerDice:s,defenderDice:o}),J.dispatch("game/changeCell",{i:t,data:a})}},{key:"dice",value:function(e){for(var t=0,r=[],a=0;a<e;a++){var n=Math.floor(6*Math.random())+1;r.push(n),t+=n}return{total:t,dice:r}}},{key:"checkLost",value:function(e){var t=J.getters["game/getBoard"],r=J.getters["game/getPlayers"];if(!t.filter((function(t){return t.owner===e})).length){var a=r.findIndex((function(t){return t.id===e}));if(r.splice(a,1),J.dispatch("game/changePlayers",r),1===r.length)return J.dispatch("game/changeSelected",null),console.log("win!"),!0}return!1}},{key:"nextPlayer",value:function(e){this.applyAdd();var t=J.getters["game/getPlayer"],r=J.getters["game/getPlayers"],a=r.findIndex((function(e){return e.id===t.id})),n=r[(a+1)%r.length];J.dispatch("game/changePlayer",n),J.dispatch("game/changeSelected",null)}},{key:"getPlayerCells",value:function(e){var t=[];return J.getters["game/getBoard"].forEach((function(r,a){r.owner===e&&t.push(a)})),t}},{key:"calculateAdd",value:function(e){for(var t=J.getters["game/getAdjacents"],r=J.getters["game/getPlayers"],a=this.getPlayerCells(e),n=1,s=0;s<a.length;s++)a[s]>-1&&function(){var e=[];e.push(a[s]),delete a[s];for(var r=0;r<e.length;r++)t[e[r]].forEach((function(t){if(a.includes(t)){e.push(t);var r=a.indexOf(t);delete a[r]}}));n=Math.max(e.length,n)}();var o=r[r.findIndex((function(t){return t.id===e}))];if(o){o.size=n,J.dispatch("game/changePlayers",r);var c=J.getters["game/getPlayer"];o.id===c.id&&J.dispatch("game/changePlayer",o)}return n}},{key:"applyAdd",value:function(){var e=J.getters["game/getBoard"],t=J.getters["game/getPlayer"],r=this.getPlayerCells(t.id),a=+t.size+t.reserve;for(a;a>0&&r.length;a--){var n=r[Math.floor(Math.random()*r.length)];e[n].dice>7?(r.splice(r.indexOf(n),1),a++):e[n].dice++}t.reserve=a;var s=J.getters["game/getPlayers"];s[s.findIndex((function(e){return e.id===t.id}))]=t,J.dispatch("game/changePlayers",s),J.dispatch("game/changeBoard",e)}}]),e}(),B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"controls"},[r("div",{staticClass:"controls_results_container",class:{"controls_results_container-active":e.resultsActive},on:{click:function(t){e.resultsActive=!1}}},[e.game.results.attacker>-1?[r("div",{staticClass:"controls_results"},[r("div",{staticClass:"controls_results_side",class:{"controls_results_side-win":e.game.results.attackerDice.total>e.game.results.defenderDice.total}},[r("div",{staticClass:"controls_results_result"},[r("div",{staticClass:"controls_results_total"},[e._v(e._s(e.game.results.attackerDice.total))]),r("div",{staticClass:"controls_results_dices"},e._l(e.game.results.attackerDice.dice,(function(e,t){return r("div",{key:t,staticClass:"controls_results_dice",class:["controls_results_dice-"+e]})})),0)]),r("div",{staticClass:"controls_results_color",class:["controls_player_color-"+e.game.results.attacker]})]),r("div",{staticClass:"controls_results_vs"},[e._v("VS")]),r("div",{staticClass:"controls_results_side",class:{"controls_results_side-win":e.game.results.attackerDice.total<=e.game.results.defenderDice.total}},[r("div",{staticClass:"controls_results_color",class:["controls_player_color-"+e.game.results.defender]}),r("div",{staticClass:"controls_results_result"},[r("div",{staticClass:"controls_results_total"},[e._v(e._s(e.game.results.defenderDice.total))]),r("div",{staticClass:"controls_results_dices"},e._l(e.game.results.defenderDice.dice,(function(e,t){return r("div",{key:t,staticClass:"controls_results_dice",class:["controls_results_dice-"+e]})})),0)])])])]:e._e()],2),r("div",{staticClass:"controls_players"},e._l(e.game.players,(function(t){return r("div",{key:t.id,staticClass:"controls_player",class:{"controls_player-active":t.id===e.game.player.id}},[r("div",{staticClass:"controls_player_color",class:["controls_player_color-"+t.id]}),r("div",{staticClass:"controls_player_size"},[e._v(e._s(t.size))]),r("div",{staticClass:"controls_player_reserve"},[e._v("(+"+e._s(t.reserve)+")")])])})),0),r("div",{staticClass:"controls_actions"},[r("v-btn",{attrs:{color:"accent"},on:{click:e.nextPlayer}},[e._v("Next turn")]),r("v-btn",{attrs:{color:"accent",outlined:""},on:{click:e.newGame}},[e._v("New game")])],1)])},M=[],E={name:"GameControls",computed:Object(w["b"])({game:function(e){return e.game},gameResults:function(e){return e.game.results}}),data:function(){return{gameService:new z,resultsActive:!1}},methods:{nextPlayer:function(){this.gameService.nextPlayer()},newGame:function(){this.gameService.startGame()}},watch:{gameResults:function(){this.resultsActive=!0}}},D=E,G=(r("b791"),Object(i["a"])(D,B,M,!1,null,"45d29150",null)),R=G.exports,F={name:"Game",components:{GameControls:R},computed:Object(w["b"])({game:function(e){return e.game}}),data:function(){return{gameService:new z}},methods:{select:function(e,t){t===this.game.player.id?this.gameService.changeSelected(e):this.gameService.attack(e)},selectable:function(e,t,r){var a=t===this.game.player.id&&r>1,n=null!==this.game.selected&&this.game.adjacents[this.game.selected].includes(e);return a||n},borderTop:function(e,t){var r=e-this.game.settings.size;return!(e>=this.game.settings.size&&this.game.board[r]&&this.game.board[r].owner===t)},borderRight:function(e,t){var r=e+1;return!(r%this.game.settings.size&&this.game.board[r]&&this.game.board[r].owner===t)},borderBottom:function(e,t){var r=e+this.game.settings.size;return!(e<this.game.settings.size*(this.game.settings.size-1)&&this.game.board[r]&&this.game.board[r].owner===t)},borderLeft:function(e,t){var r=e-1;return!(e%this.game.settings.size&&this.game.board[r]&&this.game.board[r].owner===t)}}},T=F,L=(r("6255"),Object(i["a"])(T,_,b,!1,null,"de657d74",null)),$=L.exports;a["default"].use(g["a"]);var I=[{path:"/",name:"Home",component:y},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/game",name:"Game",component:$}],H=new g["a"]({mode:"history",base:"/",routes:I}),q=H,V=r("ce5b"),K=r.n(V);r("bf40");a["default"].use(K.a);var Q=new K.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#0d2b45",secondary:"#d08159",accent:"#544e68",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});a["default"].config.productionTip=!1,new a["default"]({router:q,store:J,vuetify:Q,render:function(e){return e(u)}}).$mount("#app")},"5b75":function(e,t,r){},6255:function(e,t,r){"use strict";var a=r("5b75"),n=r.n(a);n.a},"630e":function(e,t,r){},"907d":function(e,t,r){},b791:function(e,t,r){"use strict";var a=r("630e"),n=r.n(a);n.a},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.ab8dac94.js.map